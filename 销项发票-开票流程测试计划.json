{"code": 0, "message": "访问成功！", "data": {"id": 1, "name": "销项发票-开票流程测试计划", "desc": "实现销项发票流程的数据库，验证从导入订单至开票，整个流程，受导入订单数据和预制调整数据的影响。", "module": null, "label": [], "create_user": "yangwangyu", "update_user": "", "created_time": "2023-07-1010:28", "updated_time": "2023-07-1010:28", "variable": {"TEST_HOST": "https://d-k8s-fbr-fp.bigfintax.com", "PWD_RECEPTION": "c4ca4238a0b923820dcc509a6f75849b", "TEST_HOST_OTHER": "https://test-gateway.bigfintax.com", "USER_NAME_RECEPTION": "ZQBHDLGFYXGS_admin"}, "environment": {}, "case": [{"id": 1, "name": "开具发票流程-全电电专-普通征税-含税", "desc": "导入一个带有折扣行的订单，生成预置发票，执行生成，需要审核。", "module": null, "label": [], "create_user": "yangwangyu", "update_user": "", "created_time": "2023-07-1010:28", "updated_time": "2023-07-1010:28", "variable": {}, "termination": false, "environment": {}, "step": [{"id": 4, "number": 0, "name": "前台-账号登录", "desc": "使用登录插件，通过前台账号密码登录-并将test_cas_access_token，存储至全局变量；", "type": "plugIn", "sleep": 0, "params": {"type": "login", "params": {"pass_word": "{{PWD_RECEPTION}}", "user_name": "{{USER_NAME_RECEPTION}}", "cookies_field": "COOKIES_RECEPTION"}}, "termination": false, "handlers": []}, {"id": 1, "number": 1, "name": "随机生成一个订单号", "desc": "使用随机数插件，随机生成一个订单号，存储至全局变量；", "type": "plugIn", "sleep": null, "params": {"type": "random", "params": {"length": 12, "get_field": "BILL_ID_START", "random_type": "STR"}}, "termination": false, "handlers": []}, {"id": 2, "number": 2, "name": "获取订单asserts key", "desc": "访问asserts-key接口，并将key保留，用在之后的导入订单接口。", "type": "request", "sleep": null, "params": {"data": {}, "desc": "", "host": "https://ddapi.bigfintax.com", "name": "asserts-key接口", "path": "/assembleSignatureController/get/cqbh/O7XmUkNX", "method": "GET", "cookies": {}, "post_type": "", "response_type": "text"}, "termination": false, "handlers": [{"id": 1, "type": "extract", "params": {"path": "", "type": "text", "field": "ASSERT_KEY", "condition": []}}]}, {"id": 3, "number": 3, "name": "导入一条订单", "desc": "进行订单导入。", "type": "request", "sleep": 10, "params": {"data": {"Count": 1, "Content": [{"Buyer": "全电电专-普通征税-含税", "Items": [{"Num": "1", "Unit": "升", "Price": "1", "LineNo": "1", "FreeTax": "", "TaxFlag": "1", "TaxRate": "0.13", "Standard": "", "SumAmount": "1.00", "TaxAmount": "0.12", "DetailName": "劳务派遣服务费", "ParentCode": "3079900000000000000", "DiscountType": "0", "InvoiceAmount": "0.88", "DeductionAmount": null, "VatSpecialManagement": ""}], "Payee": "王晗", "BillNo": "{{BILL_ID_START}}", "Drawer": "admin", "Seller": "500102201007206608", "BillDate": "20230216000000", "BillType": "1", "Reviewer": "范荣峥", "MachineNo": "", "StoreCode": "2021", "TaxAmount": "0.12", "TaxMethod": "0", "BuyerPhone": "010-88233550", "BuyerTaxNum": "123456787654111", "InvoiceType": "05", "SellerPhone": "027-65022526", "TotalAmount": "1.00", "BuyerAddress": "南京市雨花台区软件大道66号华通科技园406室", "RedAdviceNum": "", "SellerTaxNum": "500102201007206608", "BuyerBankName": "招商银行股份有限公司南京雨花支行", "InvoiceAmount": "0.88", "RedConfirmNum": "", "SellerAddress": "武汉市东西湖区新沟镇油纱路73号1栋", "SellerBankName": "中国光大银行武汉分行营业部", "SpecialInvoice": "", "BuyerBankAccount": "125914056010701", "SellerBankAccount": "38310188000444553"}], "RequestID": "3da5aff7c6914cf399923a72330af6191"}, "desc": "", "host": "https://d-k8s-xxp-ports-fp.bigfintax.com", "name": "导入接口", "path": "/inv-xx-ports/xxp/receiptDataIn?{{ASSERT_KEY}}", "method": "POST", "cookies": {}, "post_type": "json", "response_type": "json"}, "termination": false, "handlers": [{"id": 2, "type": "ext_asserts", "params": {"func": "==", "path": "Code", "type": "json", "condition": [], "value_right": "200"}}]}, {"id": 58, "number": 4, "name": "尝试关闭开票模板", "desc": "关闭开票模板", "type": "request", "sleep": 0, "params": {"data": {"id": "2204", "defaultFlag": 0}, "desc": "", "host": "{{TEST_HOST_OTHER}}", "name": "发票模板开关接口", "path": "/xxApi/api/v1/invoicingTemplate/optDefaultFlag", "method": "POST", "cookies": {"dev_cas_access_token": "{{COOKIES_RECEPTION}}", "test_cas_access_token": "{{COOKIES_RECEPTION}}"}, "headers": null, "post_type": "json", "response_type": "json"}, "termination": false, "handlers": []}, {"id": 5, "number": 5, "name": "前台-查询导入的订单数据，并提取billId", "desc": "", "type": "request", "sleep": null, "params": {"data": {"page": 1, "per_page": 10, "condition": "[{\"f\":\"billNo\",\"v\":\"{{BILL_ID_START}}\",\"op\":\"eq\",\"t\":\"s\"},{\"f\":\"createDateStart\",\"v\":\"\",\"op\":\"ge\",\"t\":\"s\"},{\"f\":\"createDateEnd\",\"v\":\"\",\"op\":\"le\",\"t\":\"s\"}]"}, "desc": "", "host": "{{TEST_HOST_OTHER}}", "name": "查询预制订单列表接口", "path": "/xxApi/api/v1/bill/queryBillInfoListNew", "method": "GET", "cookies": {"dev_cas_access_token": "{{COOKIES_RECEPTION}}", "test_cas_access_token": "{{COOKIES_RECEPTION}}"}, "headers": null, "post_type": "json", "response_type": "json"}, "termination": false, "handlers": [{"id": 3, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.billNo", "type": "json", "condition": [], "value_right": "{{BILL_ID_START}}"}}, {"id": 4, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.sellerTaxNo", "type": "json", "condition": [], "value_right": "500102201007206608"}}, {"id": 5, "type": "extract", "params": {"path": "data.0.id", "type": "json", "field": "BILL_ID", "condition": []}}]}, {"id": 6, "number": 6, "name": "前台-根据BILL_ID，生成预置发票", "desc": "", "type": "request", "sleep": null, "params": {"data": [{"billId": "{{BILL_ID}}"}], "desc": "", "host": "{{TEST_HOST_OTHER}}", "name": "生成预制发票接口", "path": "/xxApi/api/v1/bill/generateTemplateInvoice", "method": "POST", "cookies": {"dev_cas_access_token": "{{COOKIES_RECEPTION}}", "test_cas_access_token": "{{COOKIES_RECEPTION}}"}, "headers": null, "post_type": "json", "response_type": "json"}, "termination": false, "handlers": [{"id": 6, "type": "ext_asserts", "params": {"func": "==", "path": "code", "type": "json", "condition": [], "value_right": 200}}, {"id": 7, "type": "ext_asserts", "params": {"func": "==", "path": "result", "type": "json", "condition": [], "value_right": "success"}}]}, {"id": 7, "number": 7, "name": "前台-根据订单编号，查询待开发票管理页面，并提取INVOICE_ID；", "desc": "", "type": "request", "sleep": null, "params": {"data": {"page": 1, "pageFlag": 3, "per_page": 10, "condition": "[{\"f\":\"contraceNo\",\"v\":\"{{BILL_ID_START}}\",\"op\":\"eq\",\"t\":\"s\"}]"}, "desc": "", "host": "{{TEST_HOST_OTHER}}", "name": "查询待开发票接口", "path": "/xxApi/api/v1/InvoicequeryPage", "method": "GET", "cookies": {"dev_cas_access_token": "{{COOKIES_RECEPTION}}", "test_cas_access_token": "{{COOKIES_RECEPTION}}"}, "headers": null, "post_type": "json", "response_type": "json"}, "termination": false, "handlers": [{"id": 8, "type": "ext_asserts", "params": {"func": "==", "path": "code", "type": "json", "condition": [], "value_right": 200}}, {"id": 9, "type": "ext_asserts", "params": {"func": "==", "path": "result", "type": "json", "condition": [], "value_right": "success"}}, {"id": 10, "type": "extract", "params": {"path": "data.0.strId", "type": "json", "field": "INVOICE_ID", "condition": []}}]}, {"id": 8, "number": 8, "name": "前台-查看待开发票明细；", "desc": "", "type": "request", "sleep": null, "params": {"data": {"invoiceId": "{{INVOICE_ID}}"}, "desc": "", "host": "{{TEST_HOST_OTHER}}", "name": "查询待开发票接口", "path": "/xxApi/api/v1/invoiceStay/queryInvoiceItem", "method": "GET", "cookies": {"dev_cas_access_token": "{{COOKIES_RECEPTION}}", "test_cas_access_token": "{{COOKIES_RECEPTION}}"}, "headers": null, "post_type": "json", "response_type": "json"}, "termination": false, "handlers": [{"id": 11, "type": "ext_asserts", "params": {"func": "==", "path": "result", "type": "json", "condition": [], "value_right": "success"}}, {"id": 12, "type": "ext_asserts", "params": {"func": "==", "path": "code", "type": "json", "condition": [], "value_right": 200}}, {"id": 13, "type": "ext_asserts", "params": {"func": "==", "path": "infos", "type": "json", "condition": [], "value_right": "成功"}}, {"id": 14, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.isRemoved", "type": "json", "condition": [], "value_right": "0"}}, {"id": 15, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.version", "type": "json", "condition": [], "value_right": 0}}, {"id": 16, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.orderNum", "type": "json", "condition": [], "value_right": 1}}, {"id": 17, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.detailName", "type": "json", "condition": [], "value_right": "*生活服务*劳务派遣服务费"}}, {"id": 18, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.standard", "type": "json", "condition": [], "value_right": ""}}, {"id": 19, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.price", "type": "json", "condition": [], "value_right": 1}}, {"id": 20, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.num", "type": "json", "condition": [], "value_right": 1}}, {"id": 21, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.unit", "type": "json", "condition": [], "value_right": "升"}}, {"id": 22, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.invoiceAmount", "type": "json", "condition": [], "value_right": 0.88}}, {"id": 23, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.taxAmount", "type": "json", "condition": [], "value_right": 0.12}}, {"id": 24, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.sumAmount", "type": "json", "condition": [], "value_right": 1}}, {"id": 25, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.taxRate", "type": "json", "condition": [], "value_right": "0.13"}}, {"id": 26, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.parentCode", "type": "json", "condition": [], "value_right": "3079900000000000000"}}, {"id": 27, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.isVoided", "type": "json", "condition": [], "value_right": "0"}}, {"id": 28, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.discountType", "type": "json", "condition": [], "value_right": "0"}}, {"id": 29, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.preferentialFlag", "type": "json", "condition": [], "value_right": "0"}}, {"id": 30, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.freeTax", "type": "json", "condition": [], "value_right": ""}}, {"id": 31, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.vatSpecialManagement", "type": "json", "condition": [], "value_right": ""}}, {"id": 32, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.taxFlag", "type": "json", "condition": [], "value_right": "1"}}, {"id": 33, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.splitItem", "type": "json", "condition": [], "value_right": false}}, {"id": 34, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.priceExcludeTax", "type": "json", "condition": [], "value_right": 0.88}}]}, {"id": 9, "number": 9, "name": "前台-根据查询的INVOICE_ID，进行发票开具接口；", "desc": "", "type": "request", "sleep": null, "params": {"data": {"ids": "{{INVOICE_ID}}"}, "desc": "", "host": "{{TEST_HOST_OTHER}}", "name": "前台-开具发票接口", "path": "/xxApi/api/v1/invoiceStay/stayInvoicePro", "method": "GET", "cookies": {"dev_cas_access_token": "{{COOKIES_RECEPTION}}", "test_cas_access_token": "{{COOKIES_RECEPTION}}"}, "headers": null, "post_type": "json", "response_type": "json"}, "termination": false, "handlers": []}, {"id": 10, "number": 10, "name": "数据库查询开具发票接口，确定字段信息，并验证有效字段；", "desc": "", "type": "plugIn", "sleep": null, "params": {"type": "pg_db", "params": {"SQL": "select * from xx_sop_task_log where task_name = 1 and task_type = 1 and data_id = '{{INVOICE_ID}}';", "host": "192.168.2.65", "port": 5432, "user": "user1", "db_name": "inv_xx", "password": "123456", "field_list": [{"col": 5, "row": 0, "field": "response"}]}}, "termination": false, "handlers": [{"id": 35, "type": "ext_asserts", "params": {"func": "==", "path": "fplx", "type": "json", "condition": [], "value_right": "05"}}, {"id": 36, "type": "ext_asserts", "params": {"func": "==", "path": "getResultMethod", "type": "json", "condition": [], "value_right": "1"}}, {"id": 37, "type": "ext_asserts", "params": {"func": "==", "path": "gmfdz", "type": "json", "condition": [], "value_right": "南京市雨花台区软件大道66号华通科技园406室010-88233550"}}, {"id": 38, "type": "ext_asserts", "params": {"func": "==", "path": "gmfkhh", "type": "json", "condition": [], "value_right": "招商银行股份有限公司南京雨花支行"}}, {"id": 39, "type": "ext_asserts", "params": {"func": "==", "path": "gmfmc", "type": "json", "condition": [], "value_right": "全电电专-普通征税-含税"}}, {"id": 40, "type": "ext_asserts", "params": {"func": "==", "path": "gmfnsrsbh", "type": "json", "condition": [], "value_right": "123456787654111"}}, {"id": 41, "type": "ext_asserts", "params": {"func": "==", "path": "gmfzh", "type": "json", "condition": [], "value_right": "125914056010701"}}, {"id": 42, "type": "ext_asserts", "params": {"func": "==", "path": "hjje", "type": "json", "condition": [], "value_right": "0.88"}}, {"id": 43, "type": "ext_asserts", "params": {"func": "==", "path": "hjse", "type": "json", "condition": [], "value_right": "0.12"}}, {"id": 44, "type": "ext_asserts", "params": {"func": "==", "path": "hzqrxxdbh", "type": "json", "condition": [], "value_right": ""}}, {"id": 45, "type": "ext_asserts", "params": {"func": "==", "path": "jshj", "type": "json", "condition": [], "value_right": "1.00"}}, {"id": 46, "type": "ext_asserts", "params": {"func": "==", "path": "kpr", "type": "json", "condition": [], "value_right": "admin"}}, {"id": 47, "type": "ext_asserts", "params": {"func": "==", "path": "lzfpbz", "type": "json", "condition": [], "value_right": "0"}}, {"id": 48, "type": "ext_asserts", "params": {"func": "==", "path": "naturalPersonFlag", "type": "json", "condition": [], "value_right": "0"}}, {"id": 49, "type": "ext_asserts", "params": {"func": "==", "path": "qyDm", "type": "json", "condition": [], "value_right": "50"}}, {"id": 50, "type": "ext_asserts", "params": {"func": "==", "path": "sgfplxDm", "type": "json", "condition": [], "value_right": ""}}, {"id": 51, "type": "ext_asserts", "params": {"func": "==", "path": "tdys", "type": "json", "condition": [], "value_right": ""}}, {"id": 52, "type": "ext_asserts", "params": {"func": "==", "path": "xsfdh", "type": "json", "condition": [], "value_right": "027-65022526"}}, {"id": 53, "type": "ext_asserts", "params": {"func": "==", "path": "xsfdz", "type": "json", "condition": [], "value_right": "武汉市东西湖区新沟镇油纱路73号1栋"}}, {"id": 54, "type": "ext_asserts", "params": {"func": "==", "path": "xsfkhh", "type": "json", "condition": [], "value_right": "中国光大银行武汉分行营业部"}}, {"id": 55, "type": "ext_asserts", "params": {"func": "==", "path": "xsfkhhyhzh", "type": "json", "condition": [], "value_right": "38310188000444553"}}, {"id": 56, "type": "ext_asserts", "params": {"func": "==", "path": "xsfmc", "type": "json", "condition": [], "value_right": "500102201007206608"}}, {"id": 57, "type": "ext_asserts", "params": {"func": "==", "path": "xsfnsrsbh", "type": "json", "condition": [], "value_right": "500102201007206608"}}, {"id": 58, "type": "ext_asserts", "params": {"func": "==", "path": "xsfzh", "type": "json", "condition": [], "value_right": "38310188000444553"}}, {"id": 59, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.dj", "type": "json", "condition": [], "value_right": "0.88000000"}}, {"id": 60, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.dw", "type": "json", "condition": [], "value_right": "升"}}, {"id": 61, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.dylzfpmxxh", "type": "json", "condition": [], "value_right": "1"}}, {"id": 62, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.fphxz", "type": "json", "condition": [], "value_right": "00"}}, {"id": 63, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.ggxh", "type": "json", "condition": [], "value_right": ""}}, {"id": 64, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.hsje", "type": "json", "condition": [], "value_right": "1.00"}}, {"id": 65, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.hwhyslwfwmc", "type": "json", "condition": [], "value_right": "劳务派遣服务费"}}, {"id": 66, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.je", "type": "json", "condition": [], "value_right": "0.88"}}, {"id": 67, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.kce", "type": "json", "condition": [], "value_right": "0"}}, {"id": 68, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.mxxh", "type": "json", "condition": [], "value_right": "1"}}, {"id": 69, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.se", "type": "json", "condition": [], "value_right": "0.12"}}, {"id": 70, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.sl", "type": "json", "condition": [], "value_right": "1.00000000"}}, {"id": 71, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.slv", "type": "json", "condition": [], "value_right": "0.13"}}, {"id": 72, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.spfwjc", "type": "json", "condition": [], "value_right": "生活服务"}}, {"id": 73, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.sphfwssflhbbm", "type": "json", "condition": [], "value_right": "3079900000000000000"}}, {"id": 74, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.xmmc", "type": "json", "condition": [], "value_right": "*生活服务*劳务派遣服务费"}}, {"id": 75, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.zeroTaxFlag", "type": "json", "condition": [], "value_right": ""}}]}]}, {"id": 2, "name": "开具发票流程-全电电普-差额征税-不含税", "desc": "导入一个带有折扣行的订单，生成预置发票，执行生成，需要审核。", "module": null, "label": [], "create_user": "yangwangyu", "update_user": "", "created_time": "2023-07-1010:28", "updated_time": "2023-07-1010:28", "variable": {}, "termination": false, "environment": {}, "step": [{"id": 11, "number": 1, "name": "随机生成一个订单号", "desc": "使用随机数插件，随机生成一个订单号，存储至全局变量；", "type": "plugIn", "sleep": null, "params": {"type": "random", "params": {"length": 12, "get_field": "BILL_ID_START", "random_type": "STR"}}, "termination": false, "handlers": []}, {"id": 12, "number": 2, "name": "获取订单asserts key", "desc": "访问asserts-key接口，并将key保留，用在之后的导入订单接口。", "type": "request", "sleep": null, "params": {"data": {}, "desc": "", "host": "https://ddapi.bigfintax.com", "name": "asserts-key接口", "path": "/assembleSignatureController/get/cqbh/O7XmUkNX", "method": "GET", "cookies": {}, "post_type": "", "response_type": "text"}, "termination": false, "handlers": [{"id": 76, "type": "extract", "params": {"path": "", "type": "text", "field": "ASSERT_KEY", "condition": []}}]}, {"id": 13, "number": 3, "name": "导入一条订单", "desc": "进行订单导入。", "type": "request", "sleep": 10, "params": {"data": {"Count": 1, "Content": [{"Buyer": "全电电普-差额征税-不含税", "Items": [{"Num": "1", "Unit": "升", "Price": "1", "LineNo": "1", "FreeTax": "", "TaxFlag": "0", "TaxRate": "0.13", "Standard": "", "SumAmount": "1.00", "TaxAmount": "0.12", "DetailName": "劳务派遣服务费", "ParentCode": "3079900000000000000", "DiscountType": "0", "InvoiceAmount": "0.88", "DeductionAmount": "0.5", "VatSpecialManagement": ""}], "Payee": "王晗", "BillNo": "{{BILL_ID_START}}", "Drawer": "admin", "Seller": "500102201007206608", "BillDate": "20230216000000", "BillType": "1", "Reviewer": "范荣峥", "MachineNo": "", "StoreCode": "2021", "TaxAmount": "0.12", "TaxMethod": "2", "BuyerPhone": "010-88233550", "BuyerTaxNum": "123456787654111", "InvoiceType": "06", "SellerPhone": "027-65022526", "TotalAmount": "1.00", "BuyerAddress": "南京市雨花台区软件大道66号华通科技园406室", "RedAdviceNum": "", "SellerTaxNum": "500102201007206608", "BuyerBankName": "招商银行股份有限公司南京雨花支行", "InvoiceAmount": "0.88", "RedConfirmNum": "", "SellerAddress": "武汉市东西湖区新沟镇油纱路73号1栋", "SellerBankName": "中国光大银行武汉分行营业部", "SpecialInvoice": "", "BuyerBankAccount": "125914056010701", "SellerBankAccount": "38310188000444553"}], "RequestID": "3da5aff7c6914cf399923a72330af6191"}, "desc": "", "host": "https://d-k8s-xxp-ports-fp.bigfintax.com", "name": "导入接口", "path": "/inv-xx-ports/xxp/receiptDataIn?{{ASSERT_KEY}}", "method": "POST", "cookies": {}, "post_type": "json", "response_type": "json"}, "termination": false, "handlers": [{"id": 77, "type": "ext_asserts", "params": {"func": "==", "path": "Code", "type": "json", "condition": [], "value_right": "200"}}]}, {"id": 14, "number": 4, "name": "前台-查询导入的订单数据，并提取billId", "desc": "", "type": "request", "sleep": null, "params": {"data": {"page": 1, "per_page": 10, "condition": "[{\"f\":\"billNo\",\"v\":\"{{BILL_ID_START}}\",\"op\":\"eq\",\"t\":\"s\"},{\"f\":\"createDateStart\",\"v\":\"\",\"op\":\"ge\",\"t\":\"s\"},{\"f\":\"createDateEnd\",\"v\":\"\",\"op\":\"le\",\"t\":\"s\"}]"}, "desc": "", "host": "{{TEST_HOST_OTHER}}", "name": "查询预制订单列表接口", "path": "/xxApi/api/v1/bill/queryBillInfoListNew", "method": "GET", "cookies": {"dev_cas_access_token": "{{COOKIES_RECEPTION}}", "test_cas_access_token": "{{COOKIES_RECEPTION}}"}, "headers": null, "post_type": "json", "response_type": "json"}, "termination": false, "handlers": [{"id": 78, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.billNo", "type": "json", "condition": [], "value_right": "{{BILL_ID_START}}"}}, {"id": 79, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.sellerTaxNo", "type": "json", "condition": [], "value_right": "500102201007206608"}}, {"id": 80, "type": "extract", "params": {"path": "data.0.id", "type": "json", "field": "BILL_ID", "condition": []}}]}, {"id": 15, "number": 5, "name": "前台-根据BILL_ID，生成预置发票", "desc": "", "type": "request", "sleep": null, "params": {"data": [{"billId": "{{BILL_ID}}"}], "desc": "", "host": "{{TEST_HOST_OTHER}}", "name": "生成预制发票接口", "path": "/xxApi/api/v1/bill/generateTemplateInvoice", "method": "POST", "cookies": {"dev_cas_access_token": "{{COOKIES_RECEPTION}}", "test_cas_access_token": "{{COOKIES_RECEPTION}}"}, "headers": null, "post_type": "json", "response_type": "json"}, "termination": false, "handlers": [{"id": 81, "type": "ext_asserts", "params": {"func": "==", "path": "code", "type": "json", "condition": [], "value_right": 200}}, {"id": 82, "type": "ext_asserts", "params": {"func": "==", "path": "result", "type": "json", "condition": [], "value_right": "success"}}]}, {"id": 16, "number": 6, "name": "前台-根据订单编号，查询待开发票管理页面，并提取INVOICE_ID；", "desc": "", "type": "request", "sleep": null, "params": {"data": {"page": 1, "pageFlag": 3, "per_page": 10, "condition": "[{\"f\":\"contraceNo\",\"v\":\"{{BILL_ID_START}}\",\"op\":\"eq\",\"t\":\"s\"}]"}, "desc": "", "host": "{{TEST_HOST_OTHER}}", "name": "查询待开发票接口", "path": "/xxApi/api/v1/InvoicequeryPage", "method": "GET", "cookies": {"dev_cas_access_token": "{{COOKIES_RECEPTION}}", "test_cas_access_token": "{{COOKIES_RECEPTION}}"}, "headers": null, "post_type": "json", "response_type": "json"}, "termination": false, "handlers": [{"id": 83, "type": "ext_asserts", "params": {"func": "==", "path": "code", "type": "json", "condition": [], "value_right": 200}}, {"id": 84, "type": "ext_asserts", "params": {"func": "==", "path": "result", "type": "json", "condition": [], "value_right": "success"}}, {"id": 85, "type": "extract", "params": {"path": "data.0.strId", "type": "json", "field": "INVOICE_ID", "condition": []}}]}, {"id": 17, "number": 7, "name": "前台-查看待开发票明细；", "desc": "", "type": "request", "sleep": null, "params": {"data": {"invoiceId": "{{INVOICE_ID}}"}, "desc": "", "host": "{{TEST_HOST_OTHER}}", "name": "查询待开发票接口", "path": "/xxApi/api/v1/invoiceStay/queryInvoiceItem", "method": "GET", "cookies": {"dev_cas_access_token": "{{COOKIES_RECEPTION}}", "test_cas_access_token": "{{COOKIES_RECEPTION}}"}, "headers": null, "post_type": "json", "response_type": "json"}, "termination": false, "handlers": [{"id": 86, "type": "ext_asserts", "params": {"func": "==", "path": "result", "type": "json", "condition": [], "value_right": "success"}}, {"id": 87, "type": "ext_asserts", "params": {"func": "==", "path": "code", "type": "json", "condition": [], "value_right": 200}}, {"id": 88, "type": "ext_asserts", "params": {"func": "==", "path": "infos", "type": "json", "condition": [], "value_right": "成功"}}, {"id": 89, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.isRemoved", "type": "json", "condition": [], "value_right": "0"}}, {"id": 90, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.version", "type": "json", "condition": [], "value_right": 0}}, {"id": 91, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.orderNum", "type": "json", "condition": [], "value_right": 1}}, {"id": 92, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.detailName", "type": "json", "condition": [], "value_right": "*生活服务*劳务派遣服务费"}}, {"id": 93, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.standard", "type": "json", "condition": [], "value_right": ""}}, {"id": 94, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.price", "type": "json", "condition": [], "value_right": 0.88}}, {"id": 95, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.num", "type": "json", "condition": [], "value_right": 1}}, {"id": 96, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.unit", "type": "json", "condition": [], "value_right": "升"}}, {"id": 97, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.invoiceAmount", "type": "json", "condition": [], "value_right": 0.88}}, {"id": 98, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.taxAmount", "type": "json", "condition": [], "value_right": 0.12}}, {"id": 99, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.sumAmount", "type": "json", "condition": [], "value_right": 1}}, {"id": 100, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.taxRate", "type": "json", "condition": [], "value_right": "0.13"}}, {"id": 101, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.parentCode", "type": "json", "condition": [], "value_right": "3079900000000000000"}}, {"id": 102, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.isVoided", "type": "json", "condition": [], "value_right": "0"}}, {"id": 103, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.discountType", "type": "json", "condition": [], "value_right": "0"}}, {"id": 104, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.preferentialFlag", "type": "json", "condition": [], "value_right": "0"}}, {"id": 105, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.freeTax", "type": "json", "condition": [], "value_right": ""}}, {"id": 106, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.vatSpecialManagement", "type": "json", "condition": [], "value_right": ""}}, {"id": 107, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.taxFlag", "type": "json", "condition": [], "value_right": "0"}}, {"id": 108, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.deductionAmount", "type": "json", "condition": [], "value_right": 0.5}}, {"id": 109, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.splitItem", "type": "json", "condition": [], "value_right": false}}, {"id": 110, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.priceExcludeTax", "type": "json", "condition": [], "value_right": 0.88}}]}, {"id": 18, "number": 8, "name": "前台-根据查询的INVOICE_ID，进行发票开具接口；", "desc": "", "type": "request", "sleep": null, "params": {"data": {"ids": "{{INVOICE_ID}}"}, "desc": "", "host": "{{TEST_HOST_OTHER}}", "name": "前台-开具发票接口", "path": "/xxApi/api/v1/invoiceStay/stayInvoicePro", "method": "GET", "cookies": {"dev_cas_access_token": "{{COOKIES_RECEPTION}}", "test_cas_access_token": "{{COOKIES_RECEPTION}}"}, "headers": null, "post_type": "json", "response_type": "json"}, "termination": false, "handlers": []}, {"id": 19, "number": 9, "name": "数据库查询开具发票接口，确定字段信息，并验证有效字段；", "desc": "", "type": "plugIn", "sleep": null, "params": {"type": "pg_db", "params": {"SQL": "select * from xx_sop_task_log where task_name = 1 and task_type = 1 and data_id = '{{INVOICE_ID}}';", "host": "192.168.2.65", "port": 5432, "user": "user1", "db_name": "inv_xx", "password": "123456", "field_list": [{"col": 5, "row": 0, "field": "response"}]}}, "termination": false, "handlers": [{"id": 111, "type": "ext_asserts", "params": {"func": "==", "path": "cezslxDm", "type": "json", "condition": [], "value_right": "01"}}, {"id": 112, "type": "ext_asserts", "params": {"func": "==", "path": "fplx", "type": "json", "condition": [], "value_right": "06"}}, {"id": 113, "type": "ext_asserts", "params": {"func": "==", "path": "getResultMethod", "type": "json", "condition": [], "value_right": "1"}}, {"id": 114, "type": "ext_asserts", "params": {"func": "==", "path": "gmfdz", "type": "json", "condition": [], "value_right": "南京市雨花台区软件大道66号华通科技园406室010-88233550"}}, {"id": 115, "type": "ext_asserts", "params": {"func": "==", "path": "gmfkhh", "type": "json", "condition": [], "value_right": "招商银行股份有限公司南京雨花支行"}}, {"id": 116, "type": "ext_asserts", "params": {"func": "==", "path": "gmfmc", "type": "json", "condition": [], "value_right": "全电电普-差额征税-不含税"}}, {"id": 117, "type": "ext_asserts", "params": {"func": "==", "path": "gmfnsrsbh", "type": "json", "condition": [], "value_right": "123456787654111"}}, {"id": 118, "type": "ext_asserts", "params": {"func": "==", "path": "gmfzh", "type": "json", "condition": [], "value_right": "125914056010701"}}, {"id": 119, "type": "ext_asserts", "params": {"func": "==", "path": "hjje", "type": "json", "condition": [], "value_right": "0.88"}}, {"id": 120, "type": "ext_asserts", "params": {"func": "==", "path": "hjse", "type": "json", "condition": [], "value_right": "0.12"}}, {"id": 121, "type": "ext_asserts", "params": {"func": "==", "path": "hzqrxxdbh", "type": "json", "condition": [], "value_right": ""}}, {"id": 122, "type": "ext_asserts", "params": {"func": "==", "path": "jshj", "type": "json", "condition": [], "value_right": "1.00"}}, {"id": 123, "type": "ext_asserts", "params": {"func": "==", "path": "kpr", "type": "json", "condition": [], "value_right": "admin"}}, {"id": 124, "type": "ext_asserts", "params": {"func": "==", "path": "lzfpbz", "type": "json", "condition": [], "value_right": "0"}}, {"id": 125, "type": "ext_asserts", "params": {"func": "==", "path": "naturalPersonFlag", "type": "json", "condition": [], "value_right": "0"}}, {"id": 126, "type": "ext_asserts", "params": {"func": "==", "path": "qyDm", "type": "json", "condition": [], "value_right": "50"}}, {"id": 127, "type": "ext_asserts", "params": {"func": "==", "path": "sgfplxDm", "type": "json", "condition": [], "value_right": ""}}, {"id": 128, "type": "ext_asserts", "params": {"func": "==", "path": "tdys", "type": "json", "condition": [], "value_right": ""}}, {"id": 129, "type": "ext_asserts", "params": {"func": "==", "path": "xsfdh", "type": "json", "condition": [], "value_right": "027-65022526"}}, {"id": 130, "type": "ext_asserts", "params": {"func": "==", "path": "xsfdz", "type": "json", "condition": [], "value_right": "武汉市东西湖区新沟镇油纱路73号1栋"}}, {"id": 131, "type": "ext_asserts", "params": {"func": "==", "path": "xsfkhh", "type": "json", "condition": [], "value_right": "中国光大银行武汉分行营业部"}}, {"id": 132, "type": "ext_asserts", "params": {"func": "==", "path": "xsfkhhyhzh", "type": "json", "condition": [], "value_right": "38310188000444553"}}, {"id": 133, "type": "ext_asserts", "params": {"func": "==", "path": "xsfmc", "type": "json", "condition": [], "value_right": "500102201007206608"}}, {"id": 134, "type": "ext_asserts", "params": {"func": "==", "path": "xsfnsrsbh", "type": "json", "condition": [], "value_right": "500102201007206608"}}, {"id": 135, "type": "ext_asserts", "params": {"func": "==", "path": "xsfzh", "type": "json", "condition": [], "value_right": "38310188000444553"}}, {"id": 136, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.dj", "type": "json", "condition": [], "value_right": "0.88000000"}}, {"id": 137, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.dw", "type": "json", "condition": [], "value_right": "升"}}, {"id": 138, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.dylzfpmxxh", "type": "json", "condition": [], "value_right": "1"}}, {"id": 139, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.fphxz", "type": "json", "condition": [], "value_right": "00"}}, {"id": 140, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.ggxh", "type": "json", "condition": [], "value_right": ""}}, {"id": 141, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.hsje", "type": "json", "condition": [], "value_right": "1.00"}}, {"id": 142, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.hwhyslwfwmc", "type": "json", "condition": [], "value_right": "劳务派遣服务费"}}, {"id": 143, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.je", "type": "json", "condition": [], "value_right": "0.88"}}, {"id": 144, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.kce", "type": "json", "condition": [], "value_right": "0.50"}}, {"id": 145, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.mxxh", "type": "json", "condition": [], "value_right": "1"}}, {"id": 146, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.se", "type": "json", "condition": [], "value_right": "0.12"}}, {"id": 147, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.sl", "type": "json", "condition": [], "value_right": "1.00000000"}}, {"id": 148, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.slv", "type": "json", "condition": [], "value_right": "0.13"}}, {"id": 149, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.spfwjc", "type": "json", "condition": [], "value_right": "生活服务"}}, {"id": 150, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.sphfwssflhbbm", "type": "json", "condition": [], "value_right": "3079900000000000000"}}, {"id": 151, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.xmmc", "type": "json", "condition": [], "value_right": "*生活服务*劳务派遣服务费"}}, {"id": 152, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.zeroTaxFlag", "type": "json", "condition": [], "value_right": ""}}]}]}, {"id": 3, "name": "开具发票流程-全电电普-清单票", "desc": "导入一个带有折扣行的订单，生成预置发票，执行生成，需要审核。", "module": null, "label": [], "create_user": "yangwangyu", "update_user": "", "created_time": "2023-07-1010:28", "updated_time": "2023-07-1010:28", "variable": {}, "termination": false, "environment": {}, "step": [{"id": 20, "number": 1, "name": "随机生成一个订单号", "desc": "使用随机数插件，随机生成一个订单号，存储至全局变量；", "type": "plugIn", "sleep": null, "params": {"type": "random", "params": {"length": 12, "get_field": "BILL_ID_START", "random_type": "STR"}}, "termination": false, "handlers": []}, {"id": 21, "number": 2, "name": "获取订单asserts key", "desc": "访问asserts-key接口，并将key保留，用在之后的导入订单接口。", "type": "request", "sleep": null, "params": {"data": {}, "desc": "", "host": "https://ddapi.bigfintax.com", "name": "asserts-key接口", "path": "/assembleSignatureController/get/cqbh/O7XmUkNX", "method": "GET", "cookies": {}, "post_type": "", "response_type": "text"}, "termination": false, "handlers": [{"id": 153, "type": "extract", "params": {"path": "", "type": "text", "field": "ASSERT_KEY", "condition": []}}]}, {"id": 22, "number": 3, "name": "导入一条订单", "desc": "进行订单导入。", "type": "request", "sleep": 10, "params": {"data": {"Count": 1, "Content": [{"Buyer": "全电电普-清单票", "Items": [{"Num": "1", "Unit": "升", "Price": "1", "LineNo": "1", "FreeTax": "3", "TaxFlag": "0", "TaxRate": "0", "Standard": "", "SumAmount": "0.88", "TaxAmount": "0", "DetailName": "舒客小苏打牙膏洁白护龈清爽柠檬", "ParentCode": "1070101070100000000", "DiscountType": "0", "InvoiceAmount": "0.88", "VatSpecialManagement": ""}, {"Num": "1", "Unit": "升", "Price": "1", "LineNo": "2", "FreeTax": "3", "TaxFlag": "0", "TaxRate": "0", "Standard": "", "SumAmount": "0.88", "TaxAmount": "0", "DetailName": "舒客小苏打牙膏洁白护龈清爽柠檬", "ParentCode": "1070101070100000000", "DiscountType": "0", "InvoiceAmount": "0.88", "VatSpecialManagement": ""}, {"Num": "1", "Unit": "升", "Price": "1", "LineNo": "3", "FreeTax": "3", "TaxFlag": "0", "TaxRate": "0", "Standard": "", "SumAmount": "0.88", "TaxAmount": "0", "DetailName": "舒客小苏打牙膏洁白护龈清爽柠檬", "ParentCode": "1070101070100000000", "DiscountType": "0", "InvoiceAmount": "0.88", "VatSpecialManagement": ""}, {"Num": "1", "Unit": "升", "Price": "1", "LineNo": "4", "FreeTax": "3", "TaxFlag": "0", "TaxRate": "0", "Standard": "", "SumAmount": "0.88", "TaxAmount": "0", "DetailName": "舒客小苏打牙膏洁白护龈清爽柠檬", "ParentCode": "1070101070100000000", "DiscountType": "0", "InvoiceAmount": "0.88", "VatSpecialManagement": ""}, {"Num": "1", "Unit": "升", "Price": "1", "LineNo": "5", "FreeTax": "3", "TaxFlag": "0", "TaxRate": "0", "Standard": "", "SumAmount": "0.88", "TaxAmount": "0", "DetailName": "舒客小苏打牙膏洁白护龈清爽柠檬", "ParentCode": "1070101070100000000", "DiscountType": "0", "InvoiceAmount": "0.88", "VatSpecialManagement": ""}, {"Num": "1", "Unit": "升", "Price": "1", "LineNo": "6", "FreeTax": "3", "TaxFlag": "0", "TaxRate": "0", "Standard": "", "SumAmount": "0.88", "TaxAmount": "0", "DetailName": "舒客小苏打牙膏洁白护龈清爽柠檬", "ParentCode": "1070101070100000000", "DiscountType": "0", "InvoiceAmount": "0.88", "VatSpecialManagement": ""}, {"Num": "1", "Unit": "升", "Price": "1", "LineNo": "7", "FreeTax": "1", "TaxFlag": "0", "TaxRate": "0", "Standard": "", "SumAmount": "0.88", "TaxAmount": "0", "DetailName": "舒客小苏打牙膏洁白护龈清爽柠檬", "ParentCode": "1070101070100000000", "DiscountType": "0", "InvoiceAmount": "0.88", "VatSpecialManagement": ""}, {"Num": "1", "Unit": "升", "Price": "1", "LineNo": "8", "FreeTax": "1", "TaxFlag": "0", "TaxRate": "0", "Standard": "", "SumAmount": "0.88", "TaxAmount": "0", "DetailName": "舒客小苏打牙膏洁白护龈清爽柠檬", "ParentCode": "1070101070100000000", "DiscountType": "0", "InvoiceAmount": "0.88", "VatSpecialManagement": ""}, {"Num": "1", "Unit": "升", "Price": "1", "LineNo": "9", "FreeTax": "2", "TaxFlag": "0", "TaxRate": "0", "Standard": "", "SumAmount": "0.88", "TaxAmount": "0", "DetailName": "舒客小苏打牙膏洁白护龈清爽柠檬", "ParentCode": "1070101070100000000", "DiscountType": "0", "InvoiceAmount": "0.88", "VatSpecialManagement": ""}, {"Num": "1", "Unit": "升", "Price": "1", "LineNo": "10", "FreeTax": "2", "TaxFlag": "0", "TaxRate": "0", "Standard": "", "SumAmount": "0.88", "TaxAmount": "0", "DetailName": "舒客小苏打牙膏洁白护龈清爽柠檬", "ParentCode": "1070101070100000000", "DiscountType": "0", "InvoiceAmount": "0.88", "VatSpecialManagement": ""}], "Payee": "王晗", "BillNo": "{{BILL_ID_START}}", "Drawer": "admin", "Seller": "500102201007206608", "BillDate": "20230216000000", "BillType": "1", "Reviewer": "范荣峥", "MachineNo": "", "StoreCode": "2021", "TaxAmount": "0.12", "BuyerPhone": "010-88233550", "BuyerTaxNum": "91320114MA27H4CC5G", "InvoiceType": "10", "SellerPhone": "027-65022526", "TotalAmount": "1.00", "BuyerAddress": "南京市雨花台区软件大道66号华通科技园406室", "RedAdviceNum": "", "SellerTaxNum": "500102201007206608", "BuyerBankName": "招商银行股份有限公司南京雨花支行", "InvoiceAmount": "0.88", "RedConfirmNum": "", "SellerAddress": "武汉市东西湖区新沟镇油纱路73号1栋", "SellerBankName": "中国光大银行武汉分行营业部", "BuyerBankAccount": "125914056010701", "SellerBankAccount": "38310188000444553"}], "RequestID": "3da5aff7c6914cf399923a72330af6191"}, "desc": "", "host": "https://d-k8s-xxp-ports-fp.bigfintax.com", "name": "导入接口", "path": "/inv-xx-ports/xxp/receiptDataIn?{{ASSERT_KEY}}", "method": "POST", "cookies": {}, "post_type": "json", "response_type": "json"}, "termination": false, "handlers": [{"id": 154, "type": "ext_asserts", "params": {"func": "==", "path": "Code", "type": "json", "condition": [], "value_right": "200"}}]}, {"id": 23, "number": 4, "name": "前台-查询导入的订单数据，并提取billId", "desc": "", "type": "request", "sleep": null, "params": {"data": {"page": 1, "per_page": 10, "condition": "[{\"f\":\"billNo\",\"v\":\"{{BILL_ID_START}}\",\"op\":\"eq\",\"t\":\"s\"},{\"f\":\"createDateStart\",\"v\":\"\",\"op\":\"ge\",\"t\":\"s\"},{\"f\":\"createDateEnd\",\"v\":\"\",\"op\":\"le\",\"t\":\"s\"}]"}, "desc": "", "host": "{{TEST_HOST_OTHER}}", "name": "查询预制订单列表接口", "path": "/xxApi/api/v1/bill/queryBillInfoListNew", "method": "GET", "cookies": {"dev_cas_access_token": "{{COOKIES_RECEPTION}}", "test_cas_access_token": "{{COOKIES_RECEPTION}}"}, "headers": null, "post_type": "json", "response_type": "json"}, "termination": false, "handlers": [{"id": 155, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.billNo", "type": "json", "condition": [], "value_right": "{{BILL_ID_START}}"}}, {"id": 156, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.sellerTaxNo", "type": "json", "condition": [], "value_right": "500102201007206608"}}, {"id": 157, "type": "extract", "params": {"path": "data.0.id", "type": "json", "field": "BILL_ID", "condition": []}}]}, {"id": 24, "number": 5, "name": "前台-根据BILL_ID，生成预置发票", "desc": "", "type": "request", "sleep": null, "params": {"data": [{"billId": "{{BILL_ID}}"}], "desc": "", "host": "{{TEST_HOST_OTHER}}", "name": "生成预制发票接口", "path": "/xxApi/api/v1/bill/generateTemplateInvoice", "method": "POST", "cookies": {"dev_cas_access_token": "{{COOKIES_RECEPTION}}", "test_cas_access_token": "{{COOKIES_RECEPTION}}"}, "headers": null, "post_type": "json", "response_type": "json"}, "termination": false, "handlers": [{"id": 158, "type": "ext_asserts", "params": {"func": "==", "path": "code", "type": "json", "condition": [], "value_right": 200}}, {"id": 159, "type": "ext_asserts", "params": {"func": "==", "path": "result", "type": "json", "condition": [], "value_right": "success"}}]}, {"id": 25, "number": 6, "name": "前台-根据订单编号，查询待开发票管理页面，并提取INVOICE_ID；", "desc": "", "type": "request", "sleep": null, "params": {"data": {"page": 1, "pageFlag": 3, "per_page": 10, "condition": "[{\"f\":\"contraceNo\",\"v\":\"{{BILL_ID_START}}\",\"op\":\"eq\",\"t\":\"s\"}]"}, "desc": "", "host": "{{TEST_HOST_OTHER}}", "name": "查询待开发票接口", "path": "/xxApi/api/v1/InvoicequeryPage", "method": "GET", "cookies": {"dev_cas_access_token": "{{COOKIES_RECEPTION}}", "test_cas_access_token": "{{COOKIES_RECEPTION}}"}, "headers": null, "post_type": "json", "response_type": "json"}, "termination": false, "handlers": [{"id": 160, "type": "ext_asserts", "params": {"func": "==", "path": "code", "type": "json", "condition": [], "value_right": 200}}, {"id": 161, "type": "ext_asserts", "params": {"func": "==", "path": "result", "type": "json", "condition": [], "value_right": "success"}}, {"id": 162, "type": "extract", "params": {"path": "data.0.strId", "type": "json", "field": "INVOICE_ID", "condition": []}}]}, {"id": 26, "number": 7, "name": "前台-查看待开发票明细；", "desc": "", "type": "request", "sleep": null, "params": {"data": {"invoiceId": "{{INVOICE_ID}}"}, "desc": "", "host": "{{TEST_HOST_OTHER}}", "name": "查询待开发票接口", "path": "/xxApi/api/v1/invoiceStay/queryInvoiceItem", "method": "GET", "cookies": {"dev_cas_access_token": "{{COOKIES_RECEPTION}}", "test_cas_access_token": "{{COOKIES_RECEPTION}}"}, "headers": null, "post_type": "json", "response_type": "json"}, "termination": false, "handlers": [{"id": 163, "type": "ext_asserts", "params": {"func": "==", "path": "result", "type": "json", "condition": [], "value_right": "success"}}, {"id": 164, "type": "ext_asserts", "params": {"func": "==", "path": "code", "type": "json", "condition": [], "value_right": 200}}, {"id": 165, "type": "ext_asserts", "params": {"func": "==", "path": "infos", "type": "json", "condition": [], "value_right": "成功"}}, {"id": 166, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.isRemoved", "type": "json", "condition": [], "value_right": "0"}}, {"id": 167, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.version", "type": "json", "condition": [], "value_right": 0}}, {"id": 168, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.orderNum", "type": "json", "condition": [], "value_right": 1}}, {"id": 169, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.detailName", "type": "json", "condition": [], "value_right": "*润滑油*舒客小苏打牙膏洁白护龈清爽柠檬"}}, {"id": 170, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.standard", "type": "json", "condition": [], "value_right": ""}}, {"id": 171, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.price", "type": "json", "condition": [], "value_right": 0.88}}, {"id": 172, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.num", "type": "json", "condition": [], "value_right": 1}}, {"id": 173, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.unit", "type": "json", "condition": [], "value_right": "升"}}, {"id": 174, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.invoiceAmount", "type": "json", "condition": [], "value_right": 0.88}}, {"id": 175, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.taxAmount", "type": "json", "condition": [], "value_right": 0}}, {"id": 176, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.sumAmount", "type": "json", "condition": [], "value_right": 0.88}}, {"id": 177, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.taxRate", "type": "json", "condition": [], "value_right": "0"}}, {"id": 178, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.parentCode", "type": "json", "condition": [], "value_right": "1070101070100000000"}}, {"id": 179, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.isVoided", "type": "json", "condition": [], "value_right": "0"}}, {"id": 180, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.discountType", "type": "json", "condition": [], "value_right": "0"}}, {"id": 181, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.preferentialFlag", "type": "json", "condition": [], "value_right": "0"}}, {"id": 182, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.freeTax", "type": "json", "condition": [], "value_right": "3"}}, {"id": 183, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.vatSpecialManagement", "type": "json", "condition": [], "value_right": ""}}, {"id": 184, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.taxFlag", "type": "json", "condition": [], "value_right": "0"}}, {"id": 185, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.splitItem", "type": "json", "condition": [], "value_right": false}}, {"id": 186, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.priceExcludeTax", "type": "json", "condition": [], "value_right": 0.88}}, {"id": 187, "type": "ext_asserts", "params": {"func": "==", "path": "data.1.isRemoved", "type": "json", "condition": [], "value_right": "0"}}, {"id": 188, "type": "ext_asserts", "params": {"func": "==", "path": "data.1.version", "type": "json", "condition": [], "value_right": 0}}, {"id": 189, "type": "ext_asserts", "params": {"func": "==", "path": "data.1.orderNum", "type": "json", "condition": [], "value_right": 2}}, {"id": 190, "type": "ext_asserts", "params": {"func": "==", "path": "data.1.detailName", "type": "json", "condition": [], "value_right": "*润滑油*舒客小苏打牙膏洁白护龈清爽柠檬"}}, {"id": 191, "type": "ext_asserts", "params": {"func": "==", "path": "data.1.standard", "type": "json", "condition": [], "value_right": ""}}, {"id": 192, "type": "ext_asserts", "params": {"func": "==", "path": "data.1.price", "type": "json", "condition": [], "value_right": 0.88}}, {"id": 193, "type": "ext_asserts", "params": {"func": "==", "path": "data.1.num", "type": "json", "condition": [], "value_right": 1}}, {"id": 194, "type": "ext_asserts", "params": {"func": "==", "path": "data.1.unit", "type": "json", "condition": [], "value_right": "升"}}, {"id": 195, "type": "ext_asserts", "params": {"func": "==", "path": "data.1.invoiceAmount", "type": "json", "condition": [], "value_right": 0.88}}, {"id": 196, "type": "ext_asserts", "params": {"func": "==", "path": "data.1.taxAmount", "type": "json", "condition": [], "value_right": 0}}, {"id": 197, "type": "ext_asserts", "params": {"func": "==", "path": "data.1.sumAmount", "type": "json", "condition": [], "value_right": 0.88}}, {"id": 198, "type": "ext_asserts", "params": {"func": "==", "path": "data.1.taxRate", "type": "json", "condition": [], "value_right": "0"}}, {"id": 199, "type": "ext_asserts", "params": {"func": "==", "path": "data.1.parentCode", "type": "json", "condition": [], "value_right": "1070101070100000000"}}, {"id": 200, "type": "ext_asserts", "params": {"func": "==", "path": "data.1.isVoided", "type": "json", "condition": [], "value_right": "0"}}, {"id": 201, "type": "ext_asserts", "params": {"func": "==", "path": "data.1.discountType", "type": "json", "condition": [], "value_right": "0"}}, {"id": 202, "type": "ext_asserts", "params": {"func": "==", "path": "data.1.preferentialFlag", "type": "json", "condition": [], "value_right": "0"}}, {"id": 203, "type": "ext_asserts", "params": {"func": "==", "path": "data.1.freeTax", "type": "json", "condition": [], "value_right": "3"}}, {"id": 204, "type": "ext_asserts", "params": {"func": "==", "path": "data.1.vatSpecialManagement", "type": "json", "condition": [], "value_right": ""}}, {"id": 205, "type": "ext_asserts", "params": {"func": "==", "path": "data.1.taxFlag", "type": "json", "condition": [], "value_right": "0"}}, {"id": 206, "type": "ext_asserts", "params": {"func": "==", "path": "data.1.splitItem", "type": "json", "condition": [], "value_right": false}}, {"id": 207, "type": "ext_asserts", "params": {"func": "==", "path": "data.1.priceExcludeTax", "type": "json", "condition": [], "value_right": 0.88}}, {"id": 208, "type": "ext_asserts", "params": {"func": "==", "path": "data.2.isRemoved", "type": "json", "condition": [], "value_right": "0"}}, {"id": 209, "type": "ext_asserts", "params": {"func": "==", "path": "data.2.version", "type": "json", "condition": [], "value_right": 0}}, {"id": 210, "type": "ext_asserts", "params": {"func": "==", "path": "data.2.orderNum", "type": "json", "condition": [], "value_right": 3}}, {"id": 211, "type": "ext_asserts", "params": {"func": "==", "path": "data.2.detailName", "type": "json", "condition": [], "value_right": "*润滑油*舒客小苏打牙膏洁白护龈清爽柠檬"}}, {"id": 212, "type": "ext_asserts", "params": {"func": "==", "path": "data.2.standard", "type": "json", "condition": [], "value_right": ""}}, {"id": 213, "type": "ext_asserts", "params": {"func": "==", "path": "data.2.price", "type": "json", "condition": [], "value_right": 0.88}}, {"id": 214, "type": "ext_asserts", "params": {"func": "==", "path": "data.2.num", "type": "json", "condition": [], "value_right": 1}}, {"id": 215, "type": "ext_asserts", "params": {"func": "==", "path": "data.2.unit", "type": "json", "condition": [], "value_right": "升"}}, {"id": 216, "type": "ext_asserts", "params": {"func": "==", "path": "data.2.invoiceAmount", "type": "json", "condition": [], "value_right": 0.88}}, {"id": 217, "type": "ext_asserts", "params": {"func": "==", "path": "data.2.taxAmount", "type": "json", "condition": [], "value_right": 0}}, {"id": 218, "type": "ext_asserts", "params": {"func": "==", "path": "data.2.sumAmount", "type": "json", "condition": [], "value_right": 0.88}}, {"id": 219, "type": "ext_asserts", "params": {"func": "==", "path": "data.2.taxRate", "type": "json", "condition": [], "value_right": "0"}}, {"id": 220, "type": "ext_asserts", "params": {"func": "==", "path": "data.2.parentCode", "type": "json", "condition": [], "value_right": "1070101070100000000"}}, {"id": 221, "type": "ext_asserts", "params": {"func": "==", "path": "data.2.isVoided", "type": "json", "condition": [], "value_right": "0"}}, {"id": 222, "type": "ext_asserts", "params": {"func": "==", "path": "data.2.discountType", "type": "json", "condition": [], "value_right": "0"}}, {"id": 223, "type": "ext_asserts", "params": {"func": "==", "path": "data.2.preferentialFlag", "type": "json", "condition": [], "value_right": "0"}}, {"id": 224, "type": "ext_asserts", "params": {"func": "==", "path": "data.2.freeTax", "type": "json", "condition": [], "value_right": "3"}}, {"id": 225, "type": "ext_asserts", "params": {"func": "==", "path": "data.2.vatSpecialManagement", "type": "json", "condition": [], "value_right": ""}}, {"id": 226, "type": "ext_asserts", "params": {"func": "==", "path": "data.2.taxFlag", "type": "json", "condition": [], "value_right": "0"}}, {"id": 227, "type": "ext_asserts", "params": {"func": "==", "path": "data.2.splitItem", "type": "json", "condition": [], "value_right": false}}, {"id": 228, "type": "ext_asserts", "params": {"func": "==", "path": "data.2.priceExcludeTax", "type": "json", "condition": [], "value_right": 0.88}}, {"id": 229, "type": "ext_asserts", "params": {"func": "==", "path": "data.3.isRemoved", "type": "json", "condition": [], "value_right": "0"}}, {"id": 230, "type": "ext_asserts", "params": {"func": "==", "path": "data.3.version", "type": "json", "condition": [], "value_right": 0}}, {"id": 231, "type": "ext_asserts", "params": {"func": "==", "path": "data.3.orderNum", "type": "json", "condition": [], "value_right": 4}}, {"id": 232, "type": "ext_asserts", "params": {"func": "==", "path": "data.3.detailName", "type": "json", "condition": [], "value_right": "*润滑油*舒客小苏打牙膏洁白护龈清爽柠檬"}}, {"id": 233, "type": "ext_asserts", "params": {"func": "==", "path": "data.3.standard", "type": "json", "condition": [], "value_right": ""}}, {"id": 234, "type": "ext_asserts", "params": {"func": "==", "path": "data.3.price", "type": "json", "condition": [], "value_right": 0.88}}, {"id": 235, "type": "ext_asserts", "params": {"func": "==", "path": "data.3.num", "type": "json", "condition": [], "value_right": 1}}, {"id": 236, "type": "ext_asserts", "params": {"func": "==", "path": "data.3.unit", "type": "json", "condition": [], "value_right": "升"}}, {"id": 237, "type": "ext_asserts", "params": {"func": "==", "path": "data.3.invoiceAmount", "type": "json", "condition": [], "value_right": 0.88}}, {"id": 238, "type": "ext_asserts", "params": {"func": "==", "path": "data.3.taxAmount", "type": "json", "condition": [], "value_right": 0}}, {"id": 239, "type": "ext_asserts", "params": {"func": "==", "path": "data.3.sumAmount", "type": "json", "condition": [], "value_right": 0.88}}, {"id": 240, "type": "ext_asserts", "params": {"func": "==", "path": "data.3.taxRate", "type": "json", "condition": [], "value_right": "0"}}, {"id": 241, "type": "ext_asserts", "params": {"func": "==", "path": "data.3.parentCode", "type": "json", "condition": [], "value_right": "1070101070100000000"}}, {"id": 242, "type": "ext_asserts", "params": {"func": "==", "path": "data.3.isVoided", "type": "json", "condition": [], "value_right": "0"}}, {"id": 243, "type": "ext_asserts", "params": {"func": "==", "path": "data.3.discountType", "type": "json", "condition": [], "value_right": "0"}}, {"id": 244, "type": "ext_asserts", "params": {"func": "==", "path": "data.3.preferentialFlag", "type": "json", "condition": [], "value_right": "0"}}, {"id": 245, "type": "ext_asserts", "params": {"func": "==", "path": "data.3.freeTax", "type": "json", "condition": [], "value_right": "3"}}, {"id": 246, "type": "ext_asserts", "params": {"func": "==", "path": "data.3.vatSpecialManagement", "type": "json", "condition": [], "value_right": ""}}, {"id": 247, "type": "ext_asserts", "params": {"func": "==", "path": "data.3.taxFlag", "type": "json", "condition": [], "value_right": "0"}}, {"id": 248, "type": "ext_asserts", "params": {"func": "==", "path": "data.3.splitItem", "type": "json", "condition": [], "value_right": false}}, {"id": 249, "type": "ext_asserts", "params": {"func": "==", "path": "data.3.priceExcludeTax", "type": "json", "condition": [], "value_right": 0.88}}, {"id": 250, "type": "ext_asserts", "params": {"func": "==", "path": "data.4.isRemoved", "type": "json", "condition": [], "value_right": "0"}}, {"id": 251, "type": "ext_asserts", "params": {"func": "==", "path": "data.4.version", "type": "json", "condition": [], "value_right": 0}}, {"id": 252, "type": "ext_asserts", "params": {"func": "==", "path": "data.4.orderNum", "type": "json", "condition": [], "value_right": 5}}, {"id": 253, "type": "ext_asserts", "params": {"func": "==", "path": "data.4.detailName", "type": "json", "condition": [], "value_right": "*润滑油*舒客小苏打牙膏洁白护龈清爽柠檬"}}, {"id": 254, "type": "ext_asserts", "params": {"func": "==", "path": "data.4.standard", "type": "json", "condition": [], "value_right": ""}}, {"id": 255, "type": "ext_asserts", "params": {"func": "==", "path": "data.4.price", "type": "json", "condition": [], "value_right": 0.88}}, {"id": 256, "type": "ext_asserts", "params": {"func": "==", "path": "data.4.num", "type": "json", "condition": [], "value_right": 1}}, {"id": 257, "type": "ext_asserts", "params": {"func": "==", "path": "data.4.unit", "type": "json", "condition": [], "value_right": "升"}}, {"id": 258, "type": "ext_asserts", "params": {"func": "==", "path": "data.4.invoiceAmount", "type": "json", "condition": [], "value_right": 0.88}}, {"id": 259, "type": "ext_asserts", "params": {"func": "==", "path": "data.4.taxAmount", "type": "json", "condition": [], "value_right": 0}}, {"id": 260, "type": "ext_asserts", "params": {"func": "==", "path": "data.4.sumAmount", "type": "json", "condition": [], "value_right": 0.88}}, {"id": 261, "type": "ext_asserts", "params": {"func": "==", "path": "data.4.taxRate", "type": "json", "condition": [], "value_right": "0"}}, {"id": 262, "type": "ext_asserts", "params": {"func": "==", "path": "data.4.parentCode", "type": "json", "condition": [], "value_right": "1070101070100000000"}}, {"id": 263, "type": "ext_asserts", "params": {"func": "==", "path": "data.4.isVoided", "type": "json", "condition": [], "value_right": "0"}}, {"id": 264, "type": "ext_asserts", "params": {"func": "==", "path": "data.4.discountType", "type": "json", "condition": [], "value_right": "0"}}, {"id": 265, "type": "ext_asserts", "params": {"func": "==", "path": "data.4.preferentialFlag", "type": "json", "condition": [], "value_right": "0"}}, {"id": 266, "type": "ext_asserts", "params": {"func": "==", "path": "data.4.freeTax", "type": "json", "condition": [], "value_right": "3"}}, {"id": 267, "type": "ext_asserts", "params": {"func": "==", "path": "data.4.vatSpecialManagement", "type": "json", "condition": [], "value_right": ""}}, {"id": 268, "type": "ext_asserts", "params": {"func": "==", "path": "data.4.taxFlag", "type": "json", "condition": [], "value_right": "0"}}, {"id": 269, "type": "ext_asserts", "params": {"func": "==", "path": "data.4.splitItem", "type": "json", "condition": [], "value_right": false}}, {"id": 270, "type": "ext_asserts", "params": {"func": "==", "path": "data.4.priceExcludeTax", "type": "json", "condition": [], "value_right": 0.88}}, {"id": 271, "type": "ext_asserts", "params": {"func": "==", "path": "data.5.isRemoved", "type": "json", "condition": [], "value_right": "0"}}, {"id": 272, "type": "ext_asserts", "params": {"func": "==", "path": "data.5.version", "type": "json", "condition": [], "value_right": 0}}, {"id": 273, "type": "ext_asserts", "params": {"func": "==", "path": "data.5.orderNum", "type": "json", "condition": [], "value_right": 6}}, {"id": 274, "type": "ext_asserts", "params": {"func": "==", "path": "data.5.detailName", "type": "json", "condition": [], "value_right": "*润滑油*舒客小苏打牙膏洁白护龈清爽柠檬"}}, {"id": 275, "type": "ext_asserts", "params": {"func": "==", "path": "data.5.standard", "type": "json", "condition": [], "value_right": ""}}, {"id": 276, "type": "ext_asserts", "params": {"func": "==", "path": "data.5.price", "type": "json", "condition": [], "value_right": 0.88}}, {"id": 277, "type": "ext_asserts", "params": {"func": "==", "path": "data.5.num", "type": "json", "condition": [], "value_right": 1}}, {"id": 278, "type": "ext_asserts", "params": {"func": "==", "path": "data.5.unit", "type": "json", "condition": [], "value_right": "升"}}, {"id": 279, "type": "ext_asserts", "params": {"func": "==", "path": "data.5.invoiceAmount", "type": "json", "condition": [], "value_right": 0.88}}, {"id": 280, "type": "ext_asserts", "params": {"func": "==", "path": "data.5.taxAmount", "type": "json", "condition": [], "value_right": 0}}, {"id": 281, "type": "ext_asserts", "params": {"func": "==", "path": "data.5.sumAmount", "type": "json", "condition": [], "value_right": 0.88}}, {"id": 282, "type": "ext_asserts", "params": {"func": "==", "path": "data.5.taxRate", "type": "json", "condition": [], "value_right": "0"}}, {"id": 283, "type": "ext_asserts", "params": {"func": "==", "path": "data.5.parentCode", "type": "json", "condition": [], "value_right": "1070101070100000000"}}, {"id": 284, "type": "ext_asserts", "params": {"func": "==", "path": "data.5.isVoided", "type": "json", "condition": [], "value_right": "0"}}, {"id": 285, "type": "ext_asserts", "params": {"func": "==", "path": "data.5.discountType", "type": "json", "condition": [], "value_right": "0"}}, {"id": 286, "type": "ext_asserts", "params": {"func": "==", "path": "data.5.preferentialFlag", "type": "json", "condition": [], "value_right": "0"}}, {"id": 287, "type": "ext_asserts", "params": {"func": "==", "path": "data.5.freeTax", "type": "json", "condition": [], "value_right": "3"}}, {"id": 288, "type": "ext_asserts", "params": {"func": "==", "path": "data.5.vatSpecialManagement", "type": "json", "condition": [], "value_right": ""}}, {"id": 289, "type": "ext_asserts", "params": {"func": "==", "path": "data.5.taxFlag", "type": "json", "condition": [], "value_right": "0"}}, {"id": 290, "type": "ext_asserts", "params": {"func": "==", "path": "data.5.splitItem", "type": "json", "condition": [], "value_right": false}}, {"id": 291, "type": "ext_asserts", "params": {"func": "==", "path": "data.5.priceExcludeTax", "type": "json", "condition": [], "value_right": 0.88}}, {"id": 292, "type": "ext_asserts", "params": {"func": "==", "path": "data.6.isRemoved", "type": "json", "condition": [], "value_right": "0"}}, {"id": 293, "type": "ext_asserts", "params": {"func": "==", "path": "data.6.version", "type": "json", "condition": [], "value_right": 0}}, {"id": 294, "type": "ext_asserts", "params": {"func": "==", "path": "data.6.orderNum", "type": "json", "condition": [], "value_right": 7}}, {"id": 295, "type": "ext_asserts", "params": {"func": "==", "path": "data.6.detailName", "type": "json", "condition": [], "value_right": "*润滑油*舒客小苏打牙膏洁白护龈清爽柠檬"}}, {"id": 296, "type": "ext_asserts", "params": {"func": "==", "path": "data.6.standard", "type": "json", "condition": [], "value_right": ""}}, {"id": 297, "type": "ext_asserts", "params": {"func": "==", "path": "data.6.price", "type": "json", "condition": [], "value_right": 0.88}}, {"id": 298, "type": "ext_asserts", "params": {"func": "==", "path": "data.6.num", "type": "json", "condition": [], "value_right": 1}}, {"id": 299, "type": "ext_asserts", "params": {"func": "==", "path": "data.6.unit", "type": "json", "condition": [], "value_right": "升"}}, {"id": 300, "type": "ext_asserts", "params": {"func": "==", "path": "data.6.invoiceAmount", "type": "json", "condition": [], "value_right": 0.88}}, {"id": 301, "type": "ext_asserts", "params": {"func": "==", "path": "data.6.taxAmount", "type": "json", "condition": [], "value_right": 0}}, {"id": 302, "type": "ext_asserts", "params": {"func": "==", "path": "data.6.sumAmount", "type": "json", "condition": [], "value_right": 0.88}}, {"id": 303, "type": "ext_asserts", "params": {"func": "==", "path": "data.6.taxRate", "type": "json", "condition": [], "value_right": "0"}}, {"id": 304, "type": "ext_asserts", "params": {"func": "==", "path": "data.6.parentCode", "type": "json", "condition": [], "value_right": "1070101070100000000"}}, {"id": 305, "type": "ext_asserts", "params": {"func": "==", "path": "data.6.isVoided", "type": "json", "condition": [], "value_right": "0"}}, {"id": 306, "type": "ext_asserts", "params": {"func": "==", "path": "data.6.discountType", "type": "json", "condition": [], "value_right": "0"}}, {"id": 307, "type": "ext_asserts", "params": {"func": "==", "path": "data.6.preferentialFlag", "type": "json", "condition": [], "value_right": "1"}}, {"id": 308, "type": "ext_asserts", "params": {"func": "==", "path": "data.6.freeTax", "type": "json", "condition": [], "value_right": "1"}}, {"id": 309, "type": "ext_asserts", "params": {"func": "==", "path": "data.6.vatSpecialManagement", "type": "json", "condition": [], "value_right": "免税"}}, {"id": 310, "type": "ext_asserts", "params": {"func": "==", "path": "data.6.taxFlag", "type": "json", "condition": [], "value_right": "0"}}, {"id": 311, "type": "ext_asserts", "params": {"func": "==", "path": "data.6.splitItem", "type": "json", "condition": [], "value_right": false}}, {"id": 312, "type": "ext_asserts", "params": {"func": "==", "path": "data.6.priceExcludeTax", "type": "json", "condition": [], "value_right": 0.88}}, {"id": 313, "type": "ext_asserts", "params": {"func": "==", "path": "data.9.taxAmount", "type": "json", "condition": [], "value_right": 0}}, {"id": 314, "type": "ext_asserts", "params": {"func": "==", "path": "data.9.sumAmount", "type": "json", "condition": [], "value_right": 0.88}}, {"id": 315, "type": "ext_asserts", "params": {"func": "==", "path": "data.9.taxRate", "type": "json", "condition": [], "value_right": "0"}}, {"id": 316, "type": "ext_asserts", "params": {"func": "==", "path": "data.9.parentCode", "type": "json", "condition": [], "value_right": "1070101070100000000"}}, {"id": 317, "type": "ext_asserts", "params": {"func": "==", "path": "data.9.isVoided", "type": "json", "condition": [], "value_right": "0"}}, {"id": 318, "type": "ext_asserts", "params": {"func": "==", "path": "data.9.discountType", "type": "json", "condition": [], "value_right": "0"}}, {"id": 319, "type": "ext_asserts", "params": {"func": "==", "path": "data.9.preferentialFlag", "type": "json", "condition": [], "value_right": "1"}}, {"id": 320, "type": "ext_asserts", "params": {"func": "==", "path": "data.9.freeTax", "type": "json", "condition": [], "value_right": "2"}}, {"id": 321, "type": "ext_asserts", "params": {"func": "==", "path": "data.9.vatSpecialManagement", "type": "json", "condition": [], "value_right": "不征收"}}, {"id": 322, "type": "ext_asserts", "params": {"func": "==", "path": "data.9.taxFlag", "type": "json", "condition": [], "value_right": "0"}}, {"id": 323, "type": "ext_asserts", "params": {"func": "==", "path": "data.9.splitItem", "type": "json", "condition": [], "value_right": false}}, {"id": 324, "type": "ext_asserts", "params": {"func": "==", "path": "data.9.priceExcludeTax", "type": "json", "condition": [], "value_right": 0.88}}]}, {"id": 27, "number": 8, "name": "前台-根据查询的INVOICE_ID，进行发票开具接口；", "desc": "", "type": "request", "sleep": null, "params": {"data": {"ids": "{{INVOICE_ID}}"}, "desc": "", "host": "{{TEST_HOST_OTHER}}", "name": "前台-开具发票接口", "path": "/xxApi/api/v1/invoiceStay/stayInvoicePro", "method": "GET", "cookies": {"dev_cas_access_token": "{{COOKIES_RECEPTION}}", "test_cas_access_token": "{{COOKIES_RECEPTION}}"}, "headers": null, "post_type": "json", "response_type": "json"}, "termination": false, "handlers": []}, {"id": 28, "number": 9, "name": "数据库查询开具发票接口，确定字段信息，并验证有效字段；", "desc": "", "type": "plugIn", "sleep": null, "params": {"type": "pg_db", "params": {"SQL": "select * from xx_invoice_json_log where invoice_id = '{{INVOICE_ID}}'", "host": "192.168.2.65", "port": 5432, "user": "user1", "db_name": "inv_xx", "password": "123456", "field_list": [{"col": 4, "row": 0, "field": "response"}]}}, "termination": false, "handlers": [{"id": 325, "type": "ext_asserts", "params": {"func": "==", "path": "casherName", "type": "json", "condition": [], "value_right": "王晗"}}, {"id": 326, "type": "ext_asserts", "params": {"func": "==", "path": "machineCode", "type": "json", "condition": [], "value_right": ""}}, {"id": 327, "type": "ext_asserts", "params": {"func": "==", "path": "tradeNo", "type": "json", "condition": [], "value_right": "{{BILL_ID_START}}"}}, {"id": 328, "type": "ext_asserts", "params": {"func": "==", "path": "buyerBankAccount", "type": "json", "condition": [], "value_right": "125914056010701"}}, {"id": 329, "type": "ext_asserts", "params": {"func": "==", "path": "sellerAddress", "type": "json", "condition": [], "value_right": "武汉市东西湖区新沟镇油纱路73号1栋"}}, {"id": 330, "type": "ext_asserts", "params": {"func": "==", "path": "buyerName", "type": "json", "condition": [], "value_right": "全电电普-清单票"}}, {"id": 331, "type": "ext_asserts", "params": {"func": "==", "path": "buyerAddress", "type": "json", "condition": [], "value_right": "南京市雨花台区软件大道66号华通科技园406室010-88233550"}}, {"id": 332, "type": "ext_asserts", "params": {"func": "==", "path": "reviewerName", "type": "json", "condition": [], "value_right": "范荣峥"}}, {"id": 333, "type": "ext_asserts", "params": {"func": "!=", "path": "invoiceReqSerialNo", "type": "json", "condition": [], "value_right": null}}, {"id": 334, "type": "ext_asserts", "params": {"func": "==", "path": "buyerBankName", "type": "json", "condition": [], "value_right": "招商银行股份有限公司南京雨花支行"}}, {"id": 335, "type": "ext_asserts", "params": {"func": "==", "path": "sellerBankAccount", "type": "json", "condition": [], "value_right": "38310188000444553"}}, {"id": 336, "type": "ext_asserts", "params": {"func": "==", "path": "buyerTaxpayerNum", "type": "json", "condition": [], "value_right": "91320114MA27H4CC5G"}}, {"id": 337, "type": "ext_asserts", "params": {"func": "==", "path": "sellerTel", "type": "json", "condition": [], "value_right": "027-65022526"}}, {"id": 338, "type": "ext_asserts", "params": {"func": "==", "path": "drawerName", "type": "json", "condition": [], "value_right": "admin"}}, {"id": 339, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.0.unitPrice", "type": "json", "condition": [], "value_right": "0.88000000"}}, {"id": 340, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.0.taxRateAmount", "type": "json", "condition": [], "value_right": "0.00"}}, {"id": 341, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.0.taxRateValue", "type": "json", "condition": [], "value_right": "0"}}, {"id": 342, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.0.specificationModel", "type": "json", "condition": [], "value_right": ""}}, {"id": 343, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.0.quantity", "type": "json", "condition": [], "value_right": "1.00000000"}}, {"id": 344, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.0.taxClassificationCode", "type": "json", "condition": [], "value_right": "1070101070100000000"}}, {"id": 345, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.0.invoiceAmount", "type": "json", "condition": [], "value_right": "0.88"}}, {"id": 346, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.0.includeTaxFlag", "type": "json", "condition": [], "value_right": "1"}}, {"id": 347, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.0.goodsName", "type": "json", "condition": [], "value_right": "*润滑油*舒客小苏打牙膏洁白护龈清爽柠檬"}}, {"id": 348, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.0.meteringUnit", "type": "json", "condition": [], "value_right": "升"}}, {"id": 349, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.0.zeroTaxFlag", "type": "json", "condition": [], "value_right": "3"}}, {"id": 350, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.1.unitPrice", "type": "json", "condition": [], "value_right": "0.88000000"}}, {"id": 351, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.1.taxRateAmount", "type": "json", "condition": [], "value_right": "0.00"}}, {"id": 352, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.1.taxRateValue", "type": "json", "condition": [], "value_right": "0"}}, {"id": 353, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.1.specificationModel", "type": "json", "condition": [], "value_right": ""}}, {"id": 354, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.1.quantity", "type": "json", "condition": [], "value_right": "1.00000000"}}, {"id": 355, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.1.taxClassificationCode", "type": "json", "condition": [], "value_right": "1070101070100000000"}}, {"id": 356, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.1.invoiceAmount", "type": "json", "condition": [], "value_right": "0.88"}}, {"id": 357, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.1.includeTaxFlag", "type": "json", "condition": [], "value_right": "1"}}, {"id": 358, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.1.goodsName", "type": "json", "condition": [], "value_right": "*润滑油*舒客小苏打牙膏洁白护龈清爽柠檬"}}, {"id": 359, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.1.meteringUnit", "type": "json", "condition": [], "value_right": "升"}}, {"id": 360, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.1.zeroTaxFlag", "type": "json", "condition": [], "value_right": "3"}}, {"id": 361, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.2.unitPrice", "type": "json", "condition": [], "value_right": "0.88000000"}}, {"id": 362, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.2.taxRateAmount", "type": "json", "condition": [], "value_right": "0.00"}}, {"id": 363, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.2.taxRateValue", "type": "json", "condition": [], "value_right": "0"}}, {"id": 364, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.2.specificationModel", "type": "json", "condition": [], "value_right": ""}}, {"id": 365, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.2.quantity", "type": "json", "condition": [], "value_right": "1.00000000"}}, {"id": 366, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.2.taxClassificationCode", "type": "json", "condition": [], "value_right": "1070101070100000000"}}, {"id": 367, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.2.invoiceAmount", "type": "json", "condition": [], "value_right": "0.88"}}, {"id": 368, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.2.includeTaxFlag", "type": "json", "condition": [], "value_right": "1"}}, {"id": 369, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.2.goodsName", "type": "json", "condition": [], "value_right": "*润滑油*舒客小苏打牙膏洁白护龈清爽柠檬"}}, {"id": 370, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.2.meteringUnit", "type": "json", "condition": [], "value_right": "升"}}, {"id": 371, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.2.zeroTaxFlag", "type": "json", "condition": [], "value_right": "3"}}, {"id": 372, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.3.unitPrice", "type": "json", "condition": [], "value_right": "0.88000000"}}, {"id": 373, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.3.taxRateAmount", "type": "json", "condition": [], "value_right": "0.00"}}, {"id": 374, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.3.taxRateValue", "type": "json", "condition": [], "value_right": "0"}}, {"id": 375, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.3.specificationModel", "type": "json", "condition": [], "value_right": ""}}, {"id": 376, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.3.quantity", "type": "json", "condition": [], "value_right": "1.00000000"}}, {"id": 377, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.3.taxClassificationCode", "type": "json", "condition": [], "value_right": "1070101070100000000"}}, {"id": 378, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.3.invoiceAmount", "type": "json", "condition": [], "value_right": "0.88"}}, {"id": 379, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.3.includeTaxFlag", "type": "json", "condition": [], "value_right": "1"}}, {"id": 380, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.3.goodsName", "type": "json", "condition": [], "value_right": "*润滑油*舒客小苏打牙膏洁白护龈清爽柠檬"}}, {"id": 381, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.3.meteringUnit", "type": "json", "condition": [], "value_right": "升"}}, {"id": 382, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.3.zeroTaxFlag", "type": "json", "condition": [], "value_right": "3"}}, {"id": 383, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.4.unitPrice", "type": "json", "condition": [], "value_right": "0.88000000"}}, {"id": 384, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.4.taxRateAmount", "type": "json", "condition": [], "value_right": "0.00"}}, {"id": 385, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.4.taxRateValue", "type": "json", "condition": [], "value_right": "0"}}, {"id": 386, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.4.specificationModel", "type": "json", "condition": [], "value_right": ""}}, {"id": 387, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.4.quantity", "type": "json", "condition": [], "value_right": "1.00000000"}}, {"id": 388, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.4.taxClassificationCode", "type": "json", "condition": [], "value_right": "1070101070100000000"}}, {"id": 389, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.4.invoiceAmount", "type": "json", "condition": [], "value_right": "0.88"}}, {"id": 390, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.4.includeTaxFlag", "type": "json", "condition": [], "value_right": "1"}}, {"id": 391, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.4.goodsName", "type": "json", "condition": [], "value_right": "*润滑油*舒客小苏打牙膏洁白护龈清爽柠檬"}}, {"id": 392, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.4.meteringUnit", "type": "json", "condition": [], "value_right": "升"}}, {"id": 393, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.4.zeroTaxFlag", "type": "json", "condition": [], "value_right": "3"}}, {"id": 394, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.5.unitPrice", "type": "json", "condition": [], "value_right": "0.88000000"}}, {"id": 395, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.5.taxRateAmount", "type": "json", "condition": [], "value_right": "0.00"}}, {"id": 396, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.5.taxRateValue", "type": "json", "condition": [], "value_right": "0"}}, {"id": 397, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.5.specificationModel", "type": "json", "condition": [], "value_right": ""}}, {"id": 398, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.5.quantity", "type": "json", "condition": [], "value_right": "1.00000000"}}, {"id": 399, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.5.taxClassificationCode", "type": "json", "condition": [], "value_right": "1070101070100000000"}}, {"id": 400, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.5.invoiceAmount", "type": "json", "condition": [], "value_right": "0.88"}}, {"id": 401, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.5.includeTaxFlag", "type": "json", "condition": [], "value_right": "1"}}, {"id": 402, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.5.goodsName", "type": "json", "condition": [], "value_right": "*润滑油*舒客小苏打牙膏洁白护龈清爽柠檬"}}, {"id": 403, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.5.meteringUnit", "type": "json", "condition": [], "value_right": "升"}}, {"id": 404, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.5.zeroTaxFlag", "type": "json", "condition": [], "value_right": "3"}}, {"id": 405, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.6.unitPrice", "type": "json", "condition": [], "value_right": "0.88000000"}}, {"id": 406, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.6.taxRateValue", "type": "json", "condition": [], "value_right": "0"}}, {"id": 407, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.6.specificationModel", "type": "json", "condition": [], "value_right": ""}}, {"id": 408, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.6.quantity", "type": "json", "condition": [], "value_right": "1.00000000"}}, {"id": 409, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.6.preferentialPolicyFlag", "type": "json", "condition": [], "value_right": "1"}}, {"id": 410, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.6.invoiceAmount", "type": "json", "condition": [], "value_right": "0.88"}}, {"id": 411, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.6.includeTaxFlag", "type": "json", "condition": [], "value_right": "1"}}, {"id": 412, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.6.zeroTaxFlag", "type": "json", "condition": [], "value_right": "1"}}, {"id": 413, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.6.taxRateAmount", "type": "json", "condition": [], "value_right": "0.00"}}, {"id": 414, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.6.vatSpecialManage", "type": "json", "condition": [], "value_right": "免税"}}, {"id": 415, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.6.taxClassificationCode", "type": "json", "condition": [], "value_right": "1070101070100000000"}}, {"id": 416, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.6.goodsName", "type": "json", "condition": [], "value_right": "*润滑油*舒客小苏打牙膏洁白护龈清爽柠檬"}}, {"id": 417, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.6.meteringUnit", "type": "json", "condition": [], "value_right": "升"}}, {"id": 418, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.7.unitPrice", "type": "json", "condition": [], "value_right": "0.88000000"}}, {"id": 419, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.7.taxRateValue", "type": "json", "condition": [], "value_right": "0"}}, {"id": 420, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.7.specificationModel", "type": "json", "condition": [], "value_right": ""}}, {"id": 421, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.7.quantity", "type": "json", "condition": [], "value_right": "1.00000000"}}, {"id": 422, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.7.preferentialPolicyFlag", "type": "json", "condition": [], "value_right": "1"}}, {"id": 423, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.7.invoiceAmount", "type": "json", "condition": [], "value_right": "0.88"}}, {"id": 424, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.7.includeTaxFlag", "type": "json", "condition": [], "value_right": "1"}}, {"id": 425, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.7.zeroTaxFlag", "type": "json", "condition": [], "value_right": "1"}}, {"id": 426, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.7.taxRateAmount", "type": "json", "condition": [], "value_right": "0.00"}}, {"id": 427, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.7.vatSpecialManage", "type": "json", "condition": [], "value_right": "免税"}}, {"id": 428, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.7.taxClassificationCode", "type": "json", "condition": [], "value_right": "1070101070100000000"}}, {"id": 429, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.7.goodsName", "type": "json", "condition": [], "value_right": "*润滑油*舒客小苏打牙膏洁白护龈清爽柠檬"}}, {"id": 430, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.7.meteringUnit", "type": "json", "condition": [], "value_right": "升"}}, {"id": 431, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.8.unitPrice", "type": "json", "condition": [], "value_right": "0.88000000"}}, {"id": 432, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.8.taxRateValue", "type": "json", "condition": [], "value_right": "0"}}, {"id": 433, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.8.specificationModel", "type": "json", "condition": [], "value_right": ""}}, {"id": 434, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.8.quantity", "type": "json", "condition": [], "value_right": "1.00000000"}}, {"id": 435, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.8.preferentialPolicyFlag", "type": "json", "condition": [], "value_right": "1"}}, {"id": 436, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.8.invoiceAmount", "type": "json", "condition": [], "value_right": "0.88"}}, {"id": 437, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.8.includeTaxFlag", "type": "json", "condition": [], "value_right": "1"}}, {"id": 438, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.8.zeroTaxFlag", "type": "json", "condition": [], "value_right": "2"}}, {"id": 439, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.8.taxRateAmount", "type": "json", "condition": [], "value_right": "0.00"}}, {"id": 440, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.8.vatSpecialManage", "type": "json", "condition": [], "value_right": "不征税"}}, {"id": 441, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.8.taxClassificationCode", "type": "json", "condition": [], "value_right": "1070101070100000000"}}, {"id": 442, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.8.goodsName", "type": "json", "condition": [], "value_right": "*润滑油*舒客小苏打牙膏洁白护龈清爽柠檬"}}, {"id": 443, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.8.meteringUnit", "type": "json", "condition": [], "value_right": "升"}}, {"id": 444, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.9.unitPrice", "type": "json", "condition": [], "value_right": "0.88000000"}}, {"id": 445, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.9.taxRateValue", "type": "json", "condition": [], "value_right": "0"}}, {"id": 446, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.9.specificationModel", "type": "json", "condition": [], "value_right": ""}}, {"id": 447, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.9.quantity", "type": "json", "condition": [], "value_right": "1.00000000"}}, {"id": 448, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.9.preferentialPolicyFlag", "type": "json", "condition": [], "value_right": "1"}}, {"id": 449, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.9.invoiceAmount", "type": "json", "condition": [], "value_right": "0.88"}}, {"id": 450, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.9.includeTaxFlag", "type": "json", "condition": [], "value_right": "1"}}, {"id": 451, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.9.zeroTaxFlag", "type": "json", "condition": [], "value_right": "2"}}, {"id": 452, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.9.taxRateAmount", "type": "json", "condition": [], "value_right": "0.00"}}, {"id": 453, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.9.vatSpecialManage", "type": "json", "condition": [], "value_right": "不征税"}}, {"id": 454, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.9.taxClassificationCode", "type": "json", "condition": [], "value_right": "1070101070100000000"}}, {"id": 455, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.9.goodsName", "type": "json", "condition": [], "value_right": "*润滑油*舒客小苏打牙膏洁白护龈清爽柠檬"}}, {"id": 456, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.9.meteringUnit", "type": "json", "condition": [], "value_right": "升"}}, {"id": 457, "type": "ext_asserts", "params": {"func": "==", "path": "taxpayerNum", "type": "json", "condition": [], "value_right": "500102201007206608"}}, {"id": 458, "type": "ext_asserts", "params": {"func": "==", "path": "extensionNum", "type": "json", "condition": [], "value_right": "0"}}, {"id": 459, "type": "ext_asserts", "params": {"func": "==", "path": "sellerBankName", "type": "json", "condition": [], "value_right": "中国光大银行武汉分行营业部"}}]}]}, {"id": 4, "name": "开具发票流程-全电-电普-普通征税-不含税", "desc": "导入一个带有折扣行的订单，生成预置发票，执行生成，需要审核。", "module": null, "label": [], "create_user": "yangwangyu", "update_user": "", "created_time": "2023-07-1417:54", "updated_time": "2023-07-1010:28", "variable": {}, "termination": false, "environment": {}, "step": [{"id": 29, "number": 1, "name": "随机生成一个订单号", "desc": "使用随机数插件，随机生成一个订单号，存储至全局变量；", "type": "plugIn", "sleep": null, "params": {"type": "random", "params": {"length": 12, "get_field": "BILL_ID_START", "random_type": "STR"}}, "termination": false, "handlers": []}, {"id": 30, "number": 2, "name": "获取订单asserts key", "desc": "访问asserts-key接口，并将key保留，用在之后的导入订单接口。", "type": "request", "sleep": null, "params": {"data": {}, "desc": "", "host": "https://ddapi.bigfintax.com", "name": "asserts-key接口", "path": "/assembleSignatureController/get/cqbh/O7XmUkNX", "method": "GET", "cookies": {}, "post_type": "", "response_type": "text"}, "termination": false, "handlers": [{"id": 460, "type": "extract", "params": {"path": "", "type": "text", "field": "ASSERT_KEY", "condition": []}}]}, {"id": 31, "number": 3, "name": "导入一条订单", "desc": "进行订单导入。", "type": "request", "sleep": 10, "params": {"data": {"Count": 1, "Content": [{"Buyer": "成品油", "Items": [{"Num": "1", "Unit": "升", "Price": "1", "LineNo": "", "FreeTax": "", "TaxFlag": "0", "TaxRate": "0.13", "Standard": "", "SumAmount": "1.00", "TaxAmount": "0.12", "DetailName": "1626136590057271298", "ParentCode": "1070101070100000000", "DiscountType": "0", "InvoiceAmount": "0.88", "VatSpecialManagement": ""}], "Payee": "", "BillNo": "{{BILL_ID_START}}", "Drawer": "1", "Seller": "500102201007206608", "BillDate": "20230216000000", "BillType": "1", "Reviewer": "", "MachineNo": "", "StoreCode": "2021", "TaxAmount": "0.12", "BuyerPhone": "", "BuyerTaxNum": "91320114MA27H4CC5G", "InvoiceType": "06", "SellerPhone": "027-65022526", "TotalAmount": "1.00", "BuyerAddress": "", "RedAdviceNum": "", "SellerTaxNum": "500102201007206608", "BuyerBankName": "", "InvoiceAmount": "0.88", "RedConfirmNum": "", "SellerAddress": "武汉市东西湖区新沟镇油纱路73号1栋", "SellerBankName": "中国光大银行武汉分行营业部", "SpecialInvoice": "", "BuyerBankAccount": "", "SellerBankAccount": "38310188000444553"}], "RequestID": "3da5aff7c6914cf399923a72330af6191"}, "desc": "", "host": "https://d-k8s-xxp-ports-fp.bigfintax.com", "name": "导入接口", "path": "/inv-xx-ports/xxp/receiptDataIn?{{ASSERT_KEY}}", "method": "POST", "cookies": {}, "post_type": "json", "response_type": "json"}, "termination": false, "handlers": [{"id": 461, "type": "ext_asserts", "params": {"func": "==", "path": "Code", "type": "json", "condition": [], "value_right": "200"}}]}, {"id": 32, "number": 4, "name": "前台-查询导入的订单数据，并提取billId", "desc": "", "type": "request", "sleep": null, "params": {"data": {"page": 1, "per_page": 10, "condition": "[{\"f\":\"billNo\",\"v\":\"{{BILL_ID_START}}\",\"op\":\"eq\",\"t\":\"s\"},{\"f\":\"createDateStart\",\"v\":\"\",\"op\":\"ge\",\"t\":\"s\"},{\"f\":\"createDateEnd\",\"v\":\"\",\"op\":\"le\",\"t\":\"s\"}]"}, "desc": "", "host": "{{TEST_HOST_OTHER}}", "name": "查询预制订单列表接口", "path": "/xxApi/api/v1/bill/queryBillInfoListNew", "method": "GET", "cookies": {"dev_cas_access_token": "{{COOKIES_RECEPTION}}", "test_cas_access_token": "{{COOKIES_RECEPTION}}"}, "headers": null, "post_type": "json", "response_type": "json"}, "termination": false, "handlers": [{"id": 462, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.billNo", "type": "json", "condition": [], "value_right": "{{BILL_ID_START}}"}}, {"id": 463, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.sellerTaxNo", "type": "json", "condition": [], "value_right": "500102201007206608"}}, {"id": 464, "type": "extract", "params": {"path": "data.0.id", "type": "json", "field": "BILL_ID", "condition": []}}]}, {"id": 33, "number": 5, "name": "前台-根据BILL_ID，生成预置发票", "desc": "", "type": "request", "sleep": null, "params": {"data": [{"billId": "{{BILL_ID}}"}], "desc": "", "host": "{{TEST_HOST_OTHER}}", "name": "生成预制发票接口", "path": "/xxApi/api/v1/bill/generateTemplateInvoice", "method": "POST", "cookies": {"dev_cas_access_token": "{{COOKIES_RECEPTION}}", "test_cas_access_token": "{{COOKIES_RECEPTION}}"}, "headers": null, "post_type": "json", "response_type": "json"}, "termination": false, "handlers": [{"id": 465, "type": "ext_asserts", "params": {"func": "==", "path": "code", "type": "json", "condition": [], "value_right": 200}}, {"id": 466, "type": "ext_asserts", "params": {"func": "==", "path": "result", "type": "json", "condition": [], "value_right": "success"}}]}, {"id": 34, "number": 6, "name": "前台-根据订单编号，查询待开发票管理页面，并提取INVOICE_ID；", "desc": "", "type": "request", "sleep": null, "params": {"data": {"page": 1, "pageFlag": 3, "per_page": 10, "condition": "[{\"f\":\"contraceNo\",\"v\":\"{{BILL_ID_START}}\",\"op\":\"eq\",\"t\":\"s\"}]"}, "desc": "", "host": "{{TEST_HOST_OTHER}}", "name": "查询待开发票接口", "path": "/xxApi/api/v1/InvoicequeryPage", "method": "GET", "cookies": {"dev_cas_access_token": "{{COOKIES_RECEPTION}}", "test_cas_access_token": "{{COOKIES_RECEPTION}}"}, "headers": null, "post_type": "json", "response_type": "json"}, "termination": false, "handlers": [{"id": 467, "type": "ext_asserts", "params": {"func": "==", "path": "code", "type": "json", "condition": [], "value_right": 200}}, {"id": 468, "type": "ext_asserts", "params": {"func": "==", "path": "result", "type": "json", "condition": [], "value_right": "success"}}, {"id": 469, "type": "extract", "params": {"path": "data.0.strId", "type": "json", "field": "INVOICE_ID", "condition": []}}]}, {"id": 35, "number": 7, "name": "前台-查看待开发票明细；", "desc": "", "type": "request", "sleep": null, "params": {"data": {"invoiceId": "{{INVOICE_ID}}"}, "desc": "", "host": "{{TEST_HOST_OTHER}}", "name": "查询待开发票接口", "path": "/xxApi/api/v1/invoiceStay/queryInvoiceItem", "method": "GET", "cookies": {"dev_cas_access_token": "{{COOKIES_RECEPTION}}", "test_cas_access_token": "{{COOKIES_RECEPTION}}"}, "headers": null, "post_type": "json", "response_type": "json"}, "termination": false, "handlers": [{"id": 470, "type": "ext_asserts", "params": {"func": "==", "path": "result", "type": "json", "condition": [], "value_right": "success"}}, {"id": 471, "type": "ext_asserts", "params": {"func": "==", "path": "code", "type": "json", "condition": [], "value_right": 200}}, {"id": 472, "type": "ext_asserts", "params": {"func": "==", "path": "infos", "type": "json", "condition": [], "value_right": "成功"}}, {"id": 473, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.isRemoved", "type": "json", "condition": [], "value_right": "0"}}, {"id": 474, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.version", "type": "json", "condition": [], "value_right": 0}}, {"id": 475, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.orderNum", "type": "json", "condition": [], "value_right": 1}}, {"id": 476, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.detailName", "type": "json", "condition": [], "value_right": "*润滑油*1626136590057271298"}}, {"id": 477, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.standard", "type": "json", "condition": [], "value_right": ""}}, {"id": 478, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.price", "type": "json", "condition": [], "value_right": 0.88495575}}, {"id": 479, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.num", "type": "json", "condition": [], "value_right": 1}}, {"id": 480, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.unit", "type": "json", "condition": [], "value_right": "升"}}, {"id": 481, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.invoiceAmount", "type": "json", "condition": [], "value_right": 0.88}}, {"id": 482, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.taxAmount", "type": "json", "condition": [], "value_right": 0.12}}, {"id": 483, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.sumAmount", "type": "json", "condition": [], "value_right": 1}}, {"id": 484, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.taxRate", "type": "json", "condition": [], "value_right": "0.13"}}, {"id": 485, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.parentCode", "type": "json", "condition": [], "value_right": "1070101070100000000"}}, {"id": 486, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.isVoided", "type": "json", "condition": [], "value_right": "0"}}, {"id": 487, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.discountType", "type": "json", "condition": [], "value_right": "0"}}, {"id": 488, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.preferentialFlag", "type": "json", "condition": [], "value_right": "0"}}, {"id": 489, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.freeTax", "type": "json", "condition": [], "value_right": ""}}, {"id": 490, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.vatSpecialManagement", "type": "json", "condition": [], "value_right": ""}}, {"id": 491, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.taxFlag", "type": "json", "condition": [], "value_right": "0"}}, {"id": 492, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.splitItem", "type": "json", "condition": [], "value_right": false}}, {"id": 493, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.priceExcludeTax", "type": "json", "condition": [], "value_right": 0.88}}]}, {"id": 36, "number": 8, "name": "前台-根据查询的INVOICE_ID，进行发票开具接口；", "desc": "", "type": "request", "sleep": null, "params": {"data": {"ids": "{{INVOICE_ID}}"}, "desc": "", "host": "{{TEST_HOST_OTHER}}", "name": "前台-开具发票接口", "path": "/xxApi/api/v1/invoiceStay/stayInvoicePro", "method": "GET", "cookies": {"dev_cas_access_token": "{{COOKIES_RECEPTION}}", "test_cas_access_token": "{{COOKIES_RECEPTION}}"}, "headers": null, "post_type": "json", "response_type": "json"}, "termination": false, "handlers": []}, {"id": 37, "number": 9, "name": "数据库查询开具发票接口，确定字段信息，并验证有效字段；", "desc": "", "type": "plugIn", "sleep": null, "params": {"type": "pg_db", "params": {"SQL": "select * from xx_sop_task_log where task_name = 1 and task_type = 1 and data_id = '{{INVOICE_ID}}';", "host": "192.168.2.65", "port": 5432, "user": "user1", "db_name": "inv_xx", "password": "123456", "field_list": [{"col": 5, "row": 0, "field": "response"}]}}, "termination": false, "handlers": [{"id": 494, "type": "ext_asserts", "params": {"func": "==", "path": "fplx", "type": "json", "condition": [], "value_right": "06"}}, {"id": 495, "type": "ext_asserts", "params": {"func": "==", "path": "getResultMethod", "type": "json", "condition": [], "value_right": "1"}}, {"id": 496, "type": "ext_asserts", "params": {"func": "==", "path": "gmfmc", "type": "json", "condition": [], "value_right": "成品油"}}, {"id": 497, "type": "ext_asserts", "params": {"func": "==", "path": "gmfnsrsbh", "type": "json", "condition": [], "value_right": "91320114MA27H4CC5G"}}, {"id": 498, "type": "ext_asserts", "params": {"func": "==", "path": "hjje", "type": "json", "condition": [], "value_right": "0.88"}}, {"id": 499, "type": "ext_asserts", "params": {"func": "==", "path": "hjse", "type": "json", "condition": [], "value_right": "0.12"}}, {"id": 500, "type": "ext_asserts", "params": {"func": "==", "path": "hzqrxxdbh", "type": "json", "condition": [], "value_right": ""}}, {"id": 501, "type": "ext_asserts", "params": {"func": "==", "path": "jshj", "type": "json", "condition": [], "value_right": "1.00"}}, {"id": 502, "type": "ext_asserts", "params": {"func": "==", "path": "kpr", "type": "json", "condition": [], "value_right": "1"}}, {"id": 503, "type": "ext_asserts", "params": {"func": "==", "path": "lzfpbz", "type": "json", "condition": [], "value_right": "0"}}, {"id": 504, "type": "ext_asserts", "params": {"func": "==", "path": "naturalPersonFlag", "type": "json", "condition": [], "value_right": "0"}}, {"id": 505, "type": "ext_asserts", "params": {"func": "==", "path": "qyDm", "type": "json", "condition": [], "value_right": "50"}}, {"id": 506, "type": "ext_asserts", "params": {"func": "==", "path": "sgfplxDm", "type": "json", "condition": [], "value_right": ""}}, {"id": 507, "type": "ext_asserts", "params": {"func": "==", "path": "tdys", "type": "json", "condition": [], "value_right": ""}}, {"id": 508, "type": "ext_asserts", "params": {"func": "==", "path": "xsfdh", "type": "json", "condition": [], "value_right": "027-65022526"}}, {"id": 509, "type": "ext_asserts", "params": {"func": "==", "path": "xsfdz", "type": "json", "condition": [], "value_right": "武汉市东西湖区新沟镇油纱路73号1栋"}}, {"id": 510, "type": "ext_asserts", "params": {"func": "==", "path": "xsfkhh", "type": "json", "condition": [], "value_right": "中国光大银行武汉分行营业部"}}, {"id": 511, "type": "ext_asserts", "params": {"func": "==", "path": "xsfkhhyhzh", "type": "json", "condition": [], "value_right": "38310188000444553"}}, {"id": 512, "type": "ext_asserts", "params": {"func": "==", "path": "xsfmc", "type": "json", "condition": [], "value_right": "500102201007206608"}}, {"id": 513, "type": "ext_asserts", "params": {"func": "==", "path": "xsfnsrsbh", "type": "json", "condition": [], "value_right": "500102201007206608"}}, {"id": 514, "type": "ext_asserts", "params": {"func": "==", "path": "xsfzh", "type": "json", "condition": [], "value_right": "38310188000444553"}}, {"id": 515, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.dj", "type": "json", "condition": [], "value_right": "0.88495575"}}, {"id": 516, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.dw", "type": "json", "condition": [], "value_right": "升"}}, {"id": 517, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.dylzfpmxxh", "type": "json", "condition": [], "value_right": "1"}}, {"id": 518, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.fphxz", "type": "json", "condition": [], "value_right": "00"}}, {"id": 519, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.ggxh", "type": "json", "condition": [], "value_right": ""}}, {"id": 520, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.hsje", "type": "json", "condition": [], "value_right": "1.00"}}, {"id": 521, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.hwhyslwfwmc", "type": "json", "condition": [], "value_right": "1626136590057271298"}}, {"id": 522, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.je", "type": "json", "condition": [], "value_right": "0.88"}}, {"id": 523, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.kce", "type": "json", "condition": [], "value_right": "0"}}, {"id": 524, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.mxxh", "type": "json", "condition": [], "value_right": "1"}}, {"id": 525, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.se", "type": "json", "condition": [], "value_right": "0.12"}}, {"id": 526, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.sl", "type": "json", "condition": [], "value_right": "1.00000000"}}, {"id": 527, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.slv", "type": "json", "condition": [], "value_right": "0.13"}}, {"id": 528, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.spfwjc", "type": "json", "condition": [], "value_right": "润滑油"}}, {"id": 529, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.sphfwssflhbbm", "type": "json", "condition": [], "value_right": "1070101070100000000"}}, {"id": 530, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.xmmc", "type": "json", "condition": [], "value_right": "*润滑油*1626136590057271298"}}, {"id": 531, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.zeroTaxFlag", "type": "json", "condition": [], "value_right": ""}}]}]}, {"id": 5, "name": "开具发票流程-折扣行", "desc": "导入一个带有折扣行的订单，生成预置发票，执行生成，需要审核。", "module": null, "label": [], "create_user": "yangwangyu", "update_user": "", "created_time": "2023-07-1010:28", "updated_time": "2023-07-1010:28", "variable": {}, "termination": false, "environment": {}, "step": [{"id": 38, "number": 1, "name": "随机生成一个订单号", "desc": "使用随机数插件，随机生成一个订单号，存储至全局变量；", "type": "plugIn", "sleep": null, "params": {"type": "random", "params": {"length": 12, "get_field": "BILL_ID_START", "random_type": "STR"}}, "termination": false, "handlers": []}, {"id": 39, "number": 2, "name": "获取订单asserts key", "desc": "访问asserts-key接口，并将key保留，用在之后的导入订单接口。", "type": "request", "sleep": null, "params": {"data": {}, "desc": "", "host": "https://ddapi.bigfintax.com", "name": "asserts-key接口", "path": "/assembleSignatureController/get/cqbh/O7XmUkNX", "method": "GET", "cookies": {}, "post_type": "", "response_type": "text"}, "termination": false, "handlers": [{"id": 532, "type": "extract", "params": {"path": "", "type": "text", "field": "ASSERT_KEY", "condition": []}}]}, {"id": 40, "number": 3, "name": "导入一条订单", "desc": "进行订单导入。", "type": "request", "sleep": 10, "params": {"data": {"Count": 1, "Content": [{"Buyer": "折扣行", "Items": [{"Num": "1", "Unit": "升", "Price": "1", "LineNo": "1", "FreeTax": "", "TaxFlag": "0", "TaxRate": "0.13", "Standard": "", "SumAmount": "1.00", "TaxAmount": "0.12", "DetailName": "劳务派遣服务费", "ParentCode": "3079900000000000000", "DiscountType": "2", "InvoiceAmount": "0.88", "VatSpecialManagement": ""}, {"Num": "1", "Unit": "升", "Price": "2", "LineNo": "2", "FreeTax": "", "TaxFlag": "0", "TaxRate": "0.13", "Standard": "", "SumAmount": "-1.00", "TaxAmount": "-0.12", "DetailName": "劳务派遣服务费", "ParentCode": "3079900000000000000", "DiscountType": "1", "InvoiceAmount": "-0.88", "VatSpecialManagement": ""}, {"Num": "1", "Unit": "升", "Price": "2", "LineNo": "3", "FreeTax": "", "TaxFlag": "0", "TaxRate": "0.13", "Standard": "", "SumAmount": "1.00", "TaxAmount": "0.12", "DetailName": "666", "ParentCode": "6090000000000000000", "DiscountType": "0", "InvoiceAmount": "0.88", "VatSpecialManagement": ""}], "Payee": "王晗", "BillNo": "{{BILL_ID_START}}", "Drawer": "admin", "Seller": "500102201007206608", "BillDate": "20230216000000", "BillType": "1", "Reviewer": "范荣峥", "MachineNo": "", "StoreCode": "2021", "TaxAmount": "0.12", "BuyerPhone": "010-88233550", "BuyerTaxNum": "123456787654111", "InvoiceType": "01", "SellerPhone": "027-65022526", "TotalAmount": "1.00", "BuyerAddress": "南京市雨花台区软件大道66号华通科技园406室", "RedAdviceNum": "", "SellerTaxNum": "500102201007206608", "BuyerBankName": "招商银行股份有限公司南京雨花支行", "InvoiceAmount": "0.88", "RedConfirmNum": "", "SellerAddress": "武汉市东西湖区新沟镇油纱路73号1栋", "SellerBankName": "中国光大银行武汉分行营业部", "SpecialInvoice": "", "BuyerBankAccount": "125914056010701", "SellerBankAccount": "38310188000444553"}], "RequestID": "3da5aff7c6914cf399923a72330af6191"}, "desc": "", "host": "https://d-k8s-xxp-ports-fp.bigfintax.com", "name": "导入接口", "path": "/inv-xx-ports/xxp/receiptDataIn?{{ASSERT_KEY}}", "method": "POST", "cookies": {}, "post_type": "json", "response_type": "json"}, "termination": false, "handlers": [{"id": 533, "type": "ext_asserts", "params": {"func": "==", "path": "Code", "type": "json", "condition": [], "value_right": "200"}}]}, {"id": 41, "number": 4, "name": "前台-查询导入的订单数据，并提取billId", "desc": "", "type": "request", "sleep": null, "params": {"data": {"page": 1, "per_page": 10, "condition": "[{\"f\":\"billNo\",\"v\":\"{{BILL_ID_START}}\",\"op\":\"eq\",\"t\":\"s\"},{\"f\":\"createDateStart\",\"v\":\"\",\"op\":\"ge\",\"t\":\"s\"},{\"f\":\"createDateEnd\",\"v\":\"\",\"op\":\"le\",\"t\":\"s\"}]"}, "desc": "", "host": "{{TEST_HOST_OTHER}}", "name": "查询预制订单列表接口", "path": "/xxApi/api/v1/bill/queryBillInfoListNew", "method": "GET", "cookies": {"dev_cas_access_token": "{{COOKIES_RECEPTION}}", "test_cas_access_token": "{{COOKIES_RECEPTION}}"}, "headers": null, "post_type": "json", "response_type": "json"}, "termination": false, "handlers": [{"id": 534, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.billNo", "type": "json", "condition": [], "value_right": "{{BILL_ID_START}}"}}, {"id": 535, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.sellerTaxNo", "type": "json", "condition": [], "value_right": "500102201007206608"}}, {"id": 536, "type": "extract", "params": {"path": "data.0.id", "type": "json", "field": "BILL_ID", "condition": []}}]}, {"id": 42, "number": 5, "name": "前台-根据BILL_ID，生成预置发票", "desc": "", "type": "request", "sleep": null, "params": {"data": [{"billId": "{{BILL_ID}}"}], "desc": "", "host": "{{TEST_HOST_OTHER}}", "name": "生成预制发票接口", "path": "/xxApi/api/v1/bill/generateTemplateInvoice", "method": "POST", "cookies": {"dev_cas_access_token": "{{COOKIES_RECEPTION}}", "test_cas_access_token": "{{COOKIES_RECEPTION}}"}, "headers": null, "post_type": "json", "response_type": "json"}, "termination": false, "handlers": [{"id": 537, "type": "ext_asserts", "params": {"func": "==", "path": "code", "type": "json", "condition": [], "value_right": 200}}, {"id": 538, "type": "ext_asserts", "params": {"func": "==", "path": "result", "type": "json", "condition": [], "value_right": "success"}}]}, {"id": 43, "number": 6, "name": "前台-根据订单编号，查询待开发票管理页面，并提取INVOICE_ID；", "desc": "", "type": "request", "sleep": null, "params": {"data": {"page": 1, "pageFlag": 3, "per_page": 10, "condition": "[{\"f\":\"contraceNo\",\"v\":\"{{BILL_ID_START}}\",\"op\":\"eq\",\"t\":\"s\"}]"}, "desc": "", "host": "{{TEST_HOST_OTHER}}", "name": "查询待开发票接口", "path": "/xxApi/api/v1/InvoicequeryPage", "method": "GET", "cookies": {"dev_cas_access_token": "{{COOKIES_RECEPTION}}", "test_cas_access_token": "{{COOKIES_RECEPTION}}"}, "headers": null, "post_type": "json", "response_type": "json"}, "termination": false, "handlers": [{"id": 539, "type": "ext_asserts", "params": {"func": "==", "path": "code", "type": "json", "condition": [], "value_right": 200}}, {"id": 540, "type": "ext_asserts", "params": {"func": "==", "path": "result", "type": "json", "condition": [], "value_right": "success"}}, {"id": 541, "type": "extract", "params": {"path": "data.0.strId", "type": "json", "field": "INVOICE_ID", "condition": []}}]}, {"id": 44, "number": 7, "name": "前台-查看待开发票明细；", "desc": "", "type": "request", "sleep": null, "params": {"data": {"invoiceId": "{{INVOICE_ID}}"}, "desc": "", "host": "{{TEST_HOST_OTHER}}", "name": "查询待开发票接口", "path": "/xxApi/api/v1/invoiceStay/queryInvoiceItem", "method": "GET", "cookies": {"dev_cas_access_token": "{{COOKIES_RECEPTION}}", "test_cas_access_token": "{{COOKIES_RECEPTION}}"}, "headers": null, "post_type": "json", "response_type": "json"}, "termination": false, "handlers": [{"id": 542, "type": "ext_asserts", "params": {"func": "==", "path": "result", "type": "json", "condition": [], "value_right": "success"}}, {"id": 543, "type": "ext_asserts", "params": {"func": "==", "path": "code", "type": "json", "condition": [], "value_right": 200}}, {"id": 544, "type": "ext_asserts", "params": {"func": "==", "path": "infos", "type": "json", "condition": [], "value_right": "成功"}}, {"id": 545, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.isRemoved", "type": "json", "condition": [], "value_right": "0"}}, {"id": 546, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.version", "type": "json", "condition": [], "value_right": 0}}, {"id": 547, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.orderNum", "type": "json", "condition": [], "value_right": 1}}, {"id": 548, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.detailName", "type": "json", "condition": [], "value_right": "*生活服务*劳务派遣服务费"}}, {"id": 549, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.standard", "type": "json", "condition": [], "value_right": ""}}, {"id": 550, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.price", "type": "json", "condition": [], "value_right": 0.88495575}}, {"id": 551, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.num", "type": "json", "condition": [], "value_right": 1}}, {"id": 552, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.unit", "type": "json", "condition": [], "value_right": "升"}}, {"id": 553, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.invoiceAmount", "type": "json", "condition": [], "value_right": 0.88}}, {"id": 554, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.taxAmount", "type": "json", "condition": [], "value_right": 0.12}}, {"id": 555, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.sumAmount", "type": "json", "condition": [], "value_right": 1}}, {"id": 556, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.taxRate", "type": "json", "condition": [], "value_right": "0.13"}}, {"id": 557, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.parentCode", "type": "json", "condition": [], "value_right": "3079900000000000000"}}, {"id": 558, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.isVoided", "type": "json", "condition": [], "value_right": "0"}}, {"id": 559, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.discountType", "type": "json", "condition": [], "value_right": "2"}}, {"id": 560, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.preferentialFlag", "type": "json", "condition": [], "value_right": "0"}}, {"id": 561, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.freeTax", "type": "json", "condition": [], "value_right": ""}}, {"id": 562, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.vatSpecialManagement", "type": "json", "condition": [], "value_right": ""}}, {"id": 563, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.taxFlag", "type": "json", "condition": [], "value_right": "0"}}, {"id": 564, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.splitItem", "type": "json", "condition": [], "value_right": false}}, {"id": 565, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.priceExcludeTax", "type": "json", "condition": [], "value_right": 0.88}}, {"id": 566, "type": "ext_asserts", "params": {"func": "==", "path": "data.1.isRemoved", "type": "json", "condition": [], "value_right": "0"}}, {"id": 567, "type": "ext_asserts", "params": {"func": "==", "path": "data.1.version", "type": "json", "condition": [], "value_right": 0}}, {"id": 568, "type": "ext_asserts", "params": {"func": "==", "path": "data.1.orderNum", "type": "json", "condition": [], "value_right": 2}}, {"id": 569, "type": "ext_asserts", "params": {"func": "==", "path": "data.1.detailName", "type": "json", "condition": [], "value_right": "*生活服务*劳务派遣服务费"}}, {"id": 570, "type": "ext_asserts", "params": {"func": "==", "path": "data.1.standard", "type": "json", "condition": [], "value_right": ""}}, {"id": 571, "type": "ext_asserts", "params": {"func": "==", "path": "data.1.unit", "type": "json", "condition": [], "value_right": "升"}}, {"id": 572, "type": "ext_asserts", "params": {"func": "==", "path": "data.1.invoiceAmount", "type": "json", "condition": [], "value_right": -0.88}}, {"id": 573, "type": "ext_asserts", "params": {"func": "==", "path": "data.1.taxAmount", "type": "json", "condition": [], "value_right": -0.12}}, {"id": 574, "type": "ext_asserts", "params": {"func": "==", "path": "data.1.sumAmount", "type": "json", "condition": [], "value_right": -1}}, {"id": 575, "type": "ext_asserts", "params": {"func": "==", "path": "data.1.taxRate", "type": "json", "condition": [], "value_right": "0.13"}}, {"id": 576, "type": "ext_asserts", "params": {"func": "==", "path": "data.1.parentCode", "type": "json", "condition": [], "value_right": "3079900000000000000"}}, {"id": 577, "type": "ext_asserts", "params": {"func": "==", "path": "data.1.isVoided", "type": "json", "condition": [], "value_right": "0"}}, {"id": 578, "type": "ext_asserts", "params": {"func": "==", "path": "data.1.discountType", "type": "json", "condition": [], "value_right": "1"}}, {"id": 579, "type": "ext_asserts", "params": {"func": "==", "path": "data.1.discountTarget", "type": "json", "condition": [], "value_right": "1"}}, {"id": 580, "type": "ext_asserts", "params": {"func": "==", "path": "data.1.preferentialFlag", "type": "json", "condition": [], "value_right": "0"}}, {"id": 581, "type": "ext_asserts", "params": {"func": "==", "path": "data.1.freeTax", "type": "json", "condition": [], "value_right": ""}}, {"id": 582, "type": "ext_asserts", "params": {"func": "==", "path": "data.1.vatSpecialManagement", "type": "json", "condition": [], "value_right": ""}}, {"id": 583, "type": "ext_asserts", "params": {"func": "==", "path": "data.1.taxFlag", "type": "json", "condition": [], "value_right": "0"}}, {"id": 584, "type": "ext_asserts", "params": {"func": "==", "path": "data.1.splitItem", "type": "json", "condition": [], "value_right": false}}, {"id": 585, "type": "ext_asserts", "params": {"func": "==", "path": "data.2.isRemoved", "type": "json", "condition": [], "value_right": "0"}}, {"id": 586, "type": "ext_asserts", "params": {"func": "==", "path": "data.2.version", "type": "json", "condition": [], "value_right": 0}}, {"id": 587, "type": "ext_asserts", "params": {"func": "==", "path": "data.2.orderNum", "type": "json", "condition": [], "value_right": 3}}, {"id": 588, "type": "ext_asserts", "params": {"func": "==", "path": "data.2.detailName", "type": "json", "condition": [], "value_right": "*代理进口免税货物货款*666"}}, {"id": 589, "type": "ext_asserts", "params": {"func": "==", "path": "data.2.standard", "type": "json", "condition": [], "value_right": ""}}, {"id": 590, "type": "ext_asserts", "params": {"func": "==", "path": "data.2.price", "type": "json", "condition": [], "value_right": 0.88495575}}, {"id": 591, "type": "ext_asserts", "params": {"func": "==", "path": "data.2.num", "type": "json", "condition": [], "value_right": 1}}, {"id": 592, "type": "ext_asserts", "params": {"func": "==", "path": "data.2.unit", "type": "json", "condition": [], "value_right": "升"}}, {"id": 593, "type": "ext_asserts", "params": {"func": "==", "path": "data.2.invoiceAmount", "type": "json", "condition": [], "value_right": 0.88}}, {"id": 594, "type": "ext_asserts", "params": {"func": "==", "path": "data.2.taxAmount", "type": "json", "condition": [], "value_right": 0.12}}, {"id": 595, "type": "ext_asserts", "params": {"func": "==", "path": "data.2.sumAmount", "type": "json", "condition": [], "value_right": 1}}, {"id": 596, "type": "ext_asserts", "params": {"func": "==", "path": "data.2.taxRate", "type": "json", "condition": [], "value_right": "0.13"}}, {"id": 597, "type": "ext_asserts", "params": {"func": "==", "path": "data.2.parentCode", "type": "json", "condition": [], "value_right": "6090000000000000000"}}, {"id": 598, "type": "ext_asserts", "params": {"func": "==", "path": "data.2.isVoided", "type": "json", "condition": [], "value_right": "0"}}, {"id": 599, "type": "ext_asserts", "params": {"func": "==", "path": "data.2.discountType", "type": "json", "condition": [], "value_right": "0"}}, {"id": 600, "type": "ext_asserts", "params": {"func": "==", "path": "data.2.preferentialFlag", "type": "json", "condition": [], "value_right": "0"}}, {"id": 601, "type": "ext_asserts", "params": {"func": "==", "path": "data.2.freeTax", "type": "json", "condition": [], "value_right": ""}}, {"id": 602, "type": "ext_asserts", "params": {"func": "==", "path": "data.2.vatSpecialManagement", "type": "json", "condition": [], "value_right": ""}}, {"id": 603, "type": "ext_asserts", "params": {"func": "==", "path": "data.2.taxFlag", "type": "json", "condition": [], "value_right": "0"}}, {"id": 604, "type": "ext_asserts", "params": {"func": "==", "path": "data.2.splitItem", "type": "json", "condition": [], "value_right": false}}, {"id": 605, "type": "ext_asserts", "params": {"func": "==", "path": "data.2.priceExcludeTax", "type": "json", "condition": [], "value_right": 0.88}}]}, {"id": 45, "number": 8, "name": "前台-根据查询的INVOICE_ID，进行发票开具接口；", "desc": "", "type": "request", "sleep": null, "params": {"data": {"ids": "{{INVOICE_ID}}"}, "desc": "", "host": "{{TEST_HOST_OTHER}}", "name": "前台-开具发票接口", "path": "/xxApi/api/v1/invoiceStay/stayInvoicePro", "method": "GET", "cookies": {"dev_cas_access_token": "{{COOKIES_RECEPTION}}", "test_cas_access_token": "{{COOKIES_RECEPTION}}"}, "headers": null, "post_type": "json", "response_type": "json"}, "termination": false, "handlers": []}, {"id": 46, "number": 9, "name": "数据库查询开具发票接口，确定字段信息，并验证有效字段；", "desc": "", "type": "plugIn", "sleep": null, "params": {"type": "pg_db", "params": {"SQL": "select * from xx_invoice_json_log where invoice_id = '{{INVOICE_ID}}'", "host": "192.168.2.65", "port": 5432, "user": "user1", "db_name": "inv_xx", "password": "123456", "field_list": [{"col": 4, "row": 0, "field": "response"}]}}, "termination": false, "handlers": [{"id": 606, "type": "ext_asserts", "params": {"func": "==", "path": "casherName", "type": "json", "condition": [], "value_right": "王晗"}}, {"id": 607, "type": "ext_asserts", "params": {"func": "==", "path": "machineCode", "type": "json", "condition": [], "value_right": ""}}, {"id": 608, "type": "ext_asserts", "params": {"func": "==", "path": "tradeNo", "type": "json", "condition": [], "value_right": "{{BILL_ID_START}}"}}, {"id": 609, "type": "ext_asserts", "params": {"func": "==", "path": "buyerBankAccount", "type": "json", "condition": [], "value_right": "125914056010701"}}, {"id": 610, "type": "ext_asserts", "params": {"func": "==", "path": "sellerAddress", "type": "json", "condition": [], "value_right": "武汉市东西湖区新沟镇油纱路73号1栋"}}, {"id": 611, "type": "ext_asserts", "params": {"func": "==", "path": "buyerName", "type": "json", "condition": [], "value_right": "折扣行"}}, {"id": 612, "type": "ext_asserts", "params": {"func": "==", "path": "buyerAddress", "type": "json", "condition": [], "value_right": "南京市雨花台区软件大道66号华通科技园406室010-88233550"}}, {"id": 613, "type": "ext_asserts", "params": {"func": "==", "path": "reviewerName", "type": "json", "condition": [], "value_right": "范荣峥"}}, {"id": 614, "type": "ext_asserts", "params": {"func": "!=", "path": "invoiceReqSerialNo", "type": "json", "condition": [], "value_right": null}}, {"id": 615, "type": "ext_asserts", "params": {"func": "==", "path": "buyerBankName", "type": "json", "condition": [], "value_right": "招商银行股份有限公司南京雨花支行"}}, {"id": 616, "type": "ext_asserts", "params": {"func": "==", "path": "sellerBankAccount", "type": "json", "condition": [], "value_right": "38310188000444553"}}, {"id": 617, "type": "ext_asserts", "params": {"func": "==", "path": "buyerTaxpayerNum", "type": "json", "condition": [], "value_right": "123456787654111"}}, {"id": 618, "type": "ext_asserts", "params": {"func": "==", "path": "sellerTel", "type": "json", "condition": [], "value_right": "027-65022526"}}, {"id": 619, "type": "ext_asserts", "params": {"func": "==", "path": "drawerName", "type": "json", "condition": [], "value_right": "admin"}}, {"id": 620, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.0.unitPrice", "type": "json", "condition": [], "value_right": "1.00000000"}}, {"id": 621, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.0.taxRateValue", "type": "json", "condition": [], "value_right": "0.13"}}, {"id": 622, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.0.discountTaxRateAmount", "type": "json", "condition": [], "value_right": "-0.12"}}, {"id": 623, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.0.specificationModel", "type": "json", "condition": [], "value_right": ""}}, {"id": 624, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.0.quantity", "type": "json", "condition": [], "value_right": "1.00000000"}}, {"id": 625, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.0.discountAmount", "type": "json", "condition": [], "value_right": "-1.00"}}, {"id": 626, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.0.invoiceAmount", "type": "json", "condition": [], "value_right": "1.00"}}, {"id": 627, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.0.includeTaxFlag", "type": "json", "condition": [], "value_right": "1"}}, {"id": 628, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.0.zeroTaxFlag", "type": "json", "condition": [], "value_right": ""}}, {"id": 629, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.0.taxRateAmount", "type": "json", "condition": [], "value_right": "0.12"}}, {"id": 630, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.0.taxClassificationCode", "type": "json", "condition": [], "value_right": "3079900000000000000"}}, {"id": 631, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.0.goodsName", "type": "json", "condition": [], "value_right": "*生活服务*劳务派遣服务费"}}, {"id": 632, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.0.meteringUnit", "type": "json", "condition": [], "value_right": "升"}}, {"id": 633, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.1.unitPrice", "type": "json", "condition": [], "value_right": "1.00000000"}}, {"id": 634, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.1.taxRateAmount", "type": "json", "condition": [], "value_right": "0.12"}}, {"id": 635, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.1.taxRateValue", "type": "json", "condition": [], "value_right": "0.13"}}, {"id": 636, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.1.specificationModel", "type": "json", "condition": [], "value_right": ""}}, {"id": 637, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.1.quantity", "type": "json", "condition": [], "value_right": "1.00000000"}}, {"id": 638, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.1.taxClassificationCode", "type": "json", "condition": [], "value_right": "6090000000000000000"}}, {"id": 639, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.1.invoiceAmount", "type": "json", "condition": [], "value_right": "1.00"}}, {"id": 640, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.1.includeTaxFlag", "type": "json", "condition": [], "value_right": "1"}}, {"id": 641, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.1.goodsName", "type": "json", "condition": [], "value_right": "*代理进口免税货物货款*666"}}, {"id": 642, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.1.meteringUnit", "type": "json", "condition": [], "value_right": "升"}}, {"id": 643, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.1.zeroTaxFlag", "type": "json", "condition": [], "value_right": ""}}, {"id": 644, "type": "ext_asserts", "params": {"func": "==", "path": "taxpayerNum", "type": "json", "condition": [], "value_right": "500102201007206608"}}, {"id": 645, "type": "ext_asserts", "params": {"func": "==", "path": "extensionNum", "type": "json", "condition": [], "value_right": "0"}}, {"id": 646, "type": "ext_asserts", "params": {"func": "==", "path": "sellerBankName", "type": "json", "condition": [], "value_right": "中国光大银行武汉分行营业部"}}]}]}, {"id": 6, "name": "开具发票流程-特殊票种-成品油", "desc": "导入一个带有折扣行的订单，生成预置发票，执行生成，需要审核。", "module": null, "label": [], "create_user": "yangwangyu", "update_user": "", "created_time": "2023-07-1417:50", "updated_time": "2023-07-1417:50", "variable": {}, "termination": false, "environment": {}, "step": [{"id": 47, "number": 1, "name": "随机生成一个订单号", "desc": "使用随机数插件，随机生成一个订单号，存储至全局变量；", "type": "plugIn", "sleep": null, "params": {"type": "random", "params": {"length": 12, "get_field": "BILL_ID_START", "random_type": "STR"}}, "termination": false, "handlers": []}, {"id": 48, "number": 2, "name": "获取订单asserts key", "desc": "访问asserts-key接口，并将key保留，用在之后的导入订单接口。", "type": "request", "sleep": null, "params": {"data": {}, "desc": "", "host": "https://ddapi.bigfintax.com", "name": "asserts-key接口", "path": "/assembleSignatureController/get/cqbh/O7XmUkNX", "method": "GET", "cookies": {}, "post_type": "", "response_type": "text"}, "termination": false, "handlers": [{"id": 647, "type": "extract", "params": {"path": "", "type": "text", "field": "ASSERT_KEY", "condition": []}}]}, {"id": 49, "number": 3, "name": "导入一条订单", "desc": "进行订单导入。", "type": "request", "sleep": 5, "params": {"data": {"Count": 1, "Content": [{"Buyer": "成品油-特殊票种", "Items": [{"Num": "1", "Unit": "升", "Price": "1", "LineNo": "", "FreeTax": "", "TaxFlag": "0", "TaxRate": "0.13", "Standard": "", "SumAmount": "1.00", "TaxAmount": "0.12", "DetailName": "1626136590057271298", "ParentCode": "1070101070100000000", "DiscountType": "0", "InvoiceAmount": "0.88", "VatSpecialManagement": ""}], "Payee": "", "BillNo": "{{BILL_ID_START}}", "Drawer": "1", "Seller": "500102201007206608", "BillDate": "20230216000000", "BillType": "1", "Reviewer": "", "MachineNo": "", "StoreCode": "2021", "TaxAmount": "0.12", "BuyerPhone": "", "BuyerTaxNum": "91320114MA27H4CC5G", "InvoiceType": "06", "SellerPhone": "027-65022526", "TotalAmount": "1.00", "BuyerAddress": "", "RedAdviceNum": "", "SellerTaxNum": "500102201007206608", "BuyerBankName": "", "InvoiceAmount": "0.88", "RedConfirmNum": "", "SellerAddress": "武汉市东西湖区新沟镇油纱路73号1栋", "SellerBankName": "中国光大银行武汉分行营业部", "SpecialInvoice": "1", "BuyerBankAccount": "", "SellerBankAccount": "38310188000444553"}], "RequestID": "3da5aff7c6914cf399923a72330af6191"}, "desc": "", "host": "https://d-k8s-xxp-ports-fp.bigfintax.com", "name": "导入接口", "path": "/inv-xx-ports/xxp/receiptDataIn?{{ASSERT_KEY}}", "method": "POST", "cookies": {}, "post_type": "json", "response_type": "json"}, "termination": false, "handlers": [{"id": 648, "type": "ext_asserts", "params": {"func": "==", "path": "Code", "type": "json", "condition": [], "value_right": "200"}}]}, {"id": 50, "number": 4, "name": "前台-账号登录", "desc": "使用登录插件，通过前台账号密码登录-并将test_cas_access_token，存储至全局变量；", "type": "plugIn", "sleep": null, "params": {"type": "login", "params": {"pass_word": "{{PWD_RECEPTION}}", "user_name": "{{USER_NAME_RECEPTION}}", "cookies_field": "COOKIES_RECEPTION"}}, "termination": false, "handlers": []}, {"id": 51, "number": 5, "name": "前台-尝试开启发票模板", "desc": "", "type": "request", "sleep": null, "params": {"data": {"id": "2204", "defaultFlag": 1}, "desc": "", "host": "{{TEST_HOST_OTHER}}", "name": "发票模板开关接口", "path": "/xxApi/api/v1/invoicingTemplate/optDefaultFlag", "method": "POST", "cookies": {"dev_cas_access_token": "{{COOKIES_RECEPTION}}", "test_cas_access_token": "{{COOKIES_RECEPTION}}"}, "headers": null, "post_type": "json", "response_type": "json"}, "termination": false, "handlers": []}, {"id": 52, "number": 6, "name": "前台-查询导入的订单数据，并提取billId", "desc": "", "type": "request", "sleep": null, "params": {"data": {"page": 1, "per_page": 10, "condition": "[{\"f\":\"billNo\",\"v\":\"{{BILL_ID_START}}\",\"op\":\"eq\",\"t\":\"s\"},{\"f\":\"createDateStart\",\"v\":\"\",\"op\":\"ge\",\"t\":\"s\"},{\"f\":\"createDateEnd\",\"v\":\"\",\"op\":\"le\",\"t\":\"s\"}]"}, "desc": "", "host": "{{TEST_HOST_OTHER}}", "name": "查询预制订单列表接口", "path": "/xxApi/api/v1/bill/queryBillInfoListNew", "method": "GET", "cookies": {"dev_cas_access_token": "{{COOKIES_RECEPTION}}", "test_cas_access_token": "{{COOKIES_RECEPTION}}"}, "headers": null, "post_type": "json", "response_type": "json"}, "termination": false, "handlers": [{"id": 649, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.billNo", "type": "json", "condition": [], "value_right": "{{BILL_ID_START}}"}}, {"id": 650, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.sellerTaxNo", "type": "json", "condition": [], "value_right": "500102201007206608"}}, {"id": 651, "type": "extract", "params": {"path": "data.0.id", "type": "json", "field": "BILL_ID", "condition": []}}]}, {"id": 53, "number": 7, "name": "前台-根据BILL_ID，生成预置发票", "desc": "", "type": "request", "sleep": null, "params": {"data": [{"billId": "{{BILL_ID}}"}], "desc": "", "host": "{{TEST_HOST_OTHER}}", "name": "生成预制发票接口", "path": "/xxApi/api/v1/bill/generateTemplateInvoice", "method": "POST", "cookies": {"dev_cas_access_token": "{{COOKIES_RECEPTION}}", "test_cas_access_token": "{{COOKIES_RECEPTION}}"}, "headers": null, "post_type": "json", "response_type": "json"}, "termination": false, "handlers": [{"id": 652, "type": "ext_asserts", "params": {"func": "==", "path": "code", "type": "json", "condition": [], "value_right": 200}}, {"id": 653, "type": "ext_asserts", "params": {"func": "==", "path": "result", "type": "json", "condition": [], "value_right": "success"}}]}, {"id": 54, "number": 8, "name": "前台-根据订单编号，查询待开发票管理页面，并提取INVOICE_ID；", "desc": "", "type": "request", "sleep": null, "params": {"data": {"page": 1, "pageFlag": 3, "per_page": 10, "condition": "[{\"f\":\"contraceNo\",\"v\":\"{{BILL_ID_START}}\",\"op\":\"eq\",\"t\":\"s\"}]"}, "desc": "", "host": "{{TEST_HOST_OTHER}}", "name": "查询待开发票接口", "path": "/xxApi/api/v1/InvoicequeryPage", "method": "GET", "cookies": {"dev_cas_access_token": "{{COOKIES_RECEPTION}}", "test_cas_access_token": "{{COOKIES_RECEPTION}}"}, "headers": null, "post_type": "json", "response_type": "json"}, "termination": false, "handlers": [{"id": 654, "type": "ext_asserts", "params": {"func": "==", "path": "code", "type": "json", "condition": [], "value_right": 200}}, {"id": 655, "type": "ext_asserts", "params": {"func": "==", "path": "result", "type": "json", "condition": [], "value_right": "success"}}, {"id": 656, "type": "extract", "params": {"path": "data.0.strId", "type": "json", "field": "INVOICE_ID", "condition": []}}]}, {"id": 55, "number": 9, "name": "前台-查看待开发票明细；", "desc": "", "type": "request", "sleep": null, "params": {"data": {"invoiceId": "{{INVOICE_ID}}"}, "desc": "", "host": "{{TEST_HOST_OTHER}}", "name": "查询待开发票接口", "path": "/xxApi/api/v1/invoiceStay/queryInvoiceItem", "method": "GET", "cookies": {"dev_cas_access_token": "{{COOKIES_RECEPTION}}", "test_cas_access_token": "{{COOKIES_RECEPTION}}"}, "headers": null, "post_type": "json", "response_type": "json"}, "termination": false, "handlers": [{"id": 657, "type": "ext_asserts", "params": {"func": "==", "path": "result", "type": "json", "condition": [], "value_right": "success"}}, {"id": 658, "type": "ext_asserts", "params": {"func": "==", "path": "code", "type": "json", "condition": [], "value_right": 200}}, {"id": 659, "type": "ext_asserts", "params": {"func": "==", "path": "infos", "type": "json", "condition": [], "value_right": "成功"}}, {"id": 660, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.isRemoved", "type": "json", "condition": [], "value_right": "0"}}, {"id": 661, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.version", "type": "json", "condition": [], "value_right": 0}}, {"id": 662, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.orderNum", "type": "json", "condition": [], "value_right": 1}}, {"id": 663, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.detailName", "type": "json", "condition": [], "value_right": "*润滑油*1626136590057271298"}}, {"id": 664, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.standard", "type": "json", "condition": [], "value_right": ""}}, {"id": 665, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.price", "type": "json", "condition": [], "value_right": 0.88}}, {"id": 666, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.num", "type": "json", "condition": [], "value_right": 1}}, {"id": 667, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.unit", "type": "json", "condition": [], "value_right": "升"}}, {"id": 668, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.invoiceAmount", "type": "json", "condition": [], "value_right": 0.88}}, {"id": 669, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.taxAmount", "type": "json", "condition": [], "value_right": 0.12}}, {"id": 670, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.sumAmount", "type": "json", "condition": [], "value_right": 1}}, {"id": 671, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.taxRate", "type": "json", "condition": [], "value_right": "0.13"}}, {"id": 672, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.parentCode", "type": "json", "condition": [], "value_right": "1070101070100000000"}}, {"id": 673, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.isVoided", "type": "json", "condition": [], "value_right": "0"}}, {"id": 674, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.discountType", "type": "json", "condition": [], "value_right": "0"}}, {"id": 675, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.preferentialFlag", "type": "json", "condition": [], "value_right": "0"}}, {"id": 676, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.freeTax", "type": "json", "condition": [], "value_right": ""}}, {"id": 677, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.vatSpecialManagement", "type": "json", "condition": [], "value_right": ""}}, {"id": 678, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.taxFlag", "type": "json", "condition": [], "value_right": "0"}}, {"id": 679, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.splitItem", "type": "json", "condition": [], "value_right": false}}, {"id": 680, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.priceExcludeTax", "type": "json", "condition": [], "value_right": 0.88}}]}, {"id": 56, "number": 10, "name": "前台-根据查询的INVOICE_ID，进行发票开具接口；", "desc": "", "type": "request", "sleep": null, "params": {"data": {"ids": "{{INVOICE_ID}}"}, "desc": "", "host": "{{TEST_HOST_OTHER}}", "name": "前台-开具发票接口", "path": "/xxApi/api/v1/invoiceStay/stayInvoicePro", "method": "GET", "cookies": {"dev_cas_access_token": "{{COOKIES_RECEPTION}}", "test_cas_access_token": "{{COOKIES_RECEPTION}}"}, "headers": null, "post_type": "json", "response_type": "json"}, "termination": false, "handlers": []}, {"id": 57, "number": 11, "name": "数据库查询开具发票接口，确定字段信息，并验证有效字段；", "desc": "", "type": "plugIn", "sleep": null, "params": {"type": "pg_db", "params": {"SQL": "select * from xx_sop_task_log where task_name = 1 and task_type = 1 and data_id = '{{INVOICE_ID}}'", "host": "192.168.2.65", "port": 5432, "user": "user1", "db_name": "inv_xx", "password": "123456", "field_list": [{"col": 5, "row": 0, "field": "response"}]}}, "termination": false, "handlers": [{"id": 681, "type": "ext_asserts", "params": {"func": "==", "path": "bz", "type": "json", "condition": [], "value_right": "*润滑油*1626136590057271298:1.00"}}, {"id": 682, "type": "ext_asserts", "params": {"func": "==", "path": "fplx", "type": "json", "condition": [], "value_right": "06"}}, {"id": 683, "type": "ext_asserts", "params": {"func": "==", "path": "getResultMethod", "type": "json", "condition": [], "value_right": "1"}}, {"id": 684, "type": "ext_asserts", "params": {"func": "==", "path": "gmfmc", "type": "json", "condition": [], "value_right": "成品油-特殊票种"}}, {"id": 685, "type": "ext_asserts", "params": {"func": "==", "path": "gmfnsrsbh", "type": "json", "condition": [], "value_right": "91320114MA27H4CC5G"}}, {"id": 686, "type": "ext_asserts", "params": {"func": "==", "path": "hjje", "type": "json", "condition": [], "value_right": "0.88"}}, {"id": 687, "type": "ext_asserts", "params": {"func": "==", "path": "hjse", "type": "json", "condition": [], "value_right": "0.12"}}, {"id": 688, "type": "ext_asserts", "params": {"func": "==", "path": "jshj", "type": "json", "condition": [], "value_right": "1.00"}}, {"id": 689, "type": "ext_asserts", "params": {"func": "==", "path": "kpr", "type": "json", "condition": [], "value_right": "1"}}, {"id": 690, "type": "ext_asserts", "params": {"func": "==", "path": "lzfpbz", "type": "json", "condition": [], "value_right": "0"}}, {"id": 691, "type": "ext_asserts", "params": {"func": "==", "path": "naturalPersonFlag", "type": "json", "condition": [], "value_right": "0"}}, {"id": 692, "type": "ext_asserts", "params": {"func": "==", "path": "qyDm", "type": "json", "condition": [], "value_right": "50"}}, {"id": 693, "type": "ext_asserts", "params": {"func": "==", "path": "sgfplxDm", "type": "json", "condition": [], "value_right": ""}}, {"id": 694, "type": "ext_asserts", "params": {"func": "==", "path": "tdys", "type": "json", "condition": [], "value_right": ""}}, {"id": 695, "type": "ext_asserts", "params": {"func": "==", "path": "xsfdh", "type": "json", "condition": [], "value_right": "027-65022526"}}, {"id": 696, "type": "ext_asserts", "params": {"func": "==", "path": "xsfdz", "type": "json", "condition": [], "value_right": "武汉市东西湖区新沟镇油纱路73号1栋"}}, {"id": 697, "type": "ext_asserts", "params": {"func": "==", "path": "xsfkhh", "type": "json", "condition": [], "value_right": "中国光大银行武汉分行营业部"}}, {"id": 698, "type": "ext_asserts", "params": {"func": "==", "path": "xsfkhhyhzh", "type": "json", "condition": [], "value_right": "38310188000444553"}}, {"id": 699, "type": "ext_asserts", "params": {"func": "==", "path": "xsfmc", "type": "json", "condition": [], "value_right": "500102201007206608"}}, {"id": 700, "type": "ext_asserts", "params": {"func": "==", "path": "xsfnsrsbh", "type": "json", "condition": [], "value_right": "500102201007206608"}}, {"id": 701, "type": "ext_asserts", "params": {"func": "==", "path": "xsfzh", "type": "json", "condition": [], "value_right": "38310188000444553"}}, {"id": 702, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.dj", "type": "json", "condition": [], "value_right": "0.88000000"}}, {"id": 703, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.dw", "type": "json", "condition": [], "value_right": "升"}}, {"id": 704, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.dylzfpmxxh", "type": "json", "condition": [], "value_right": "1"}}, {"id": 705, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.fphxz", "type": "json", "condition": [], "value_right": "00"}}, {"id": 706, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.ggxh", "type": "json", "condition": [], "value_right": ""}}, {"id": 707, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.hsje", "type": "json", "condition": [], "value_right": "1.00"}}, {"id": 708, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.hwhyslwfwmc", "type": "json", "condition": [], "value_right": "1626136590057271298"}}, {"id": 709, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.je", "type": "json", "condition": [], "value_right": "0.88"}}, {"id": 710, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.kce", "type": "json", "condition": [], "value_right": "0"}}, {"id": 711, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.mxxh", "type": "json", "condition": [], "value_right": "1"}}, {"id": 712, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.se", "type": "json", "condition": [], "value_right": "0.12"}}, {"id": 713, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.sl", "type": "json", "condition": [], "value_right": "1.00000000"}}, {"id": 714, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.slv", "type": "json", "condition": [], "value_right": "0.13"}}, {"id": 715, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.spfwjc", "type": "json", "condition": [], "value_right": "润滑油"}}, {"id": 716, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.sphfwssflhbbm", "type": "json", "condition": [], "value_right": "1070101070100000000"}}, {"id": 717, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.xmmc", "type": "json", "condition": [], "value_right": "*润滑油*1626136590057271298"}}, {"id": 718, "type": "ext_asserts", "params": {"func": "==", "path": "fpmxList.0.zeroTaxFlag", "type": "json", "condition": [], "value_right": ""}}]}]}, {"id": 8, "name": "开具发票流程-合并单据", "desc": "导入一个带有折扣行的订单，生成预置发票，执行生成，需要审核。", "module": null, "label": [], "create_user": "yangwangyu", "update_user": "", "created_time": "2023-07-2118:13", "updated_time": "2023-07-2118:13", "variable": {}, "termination": false, "environment": {}, "step": [{"id": 83, "number": 1, "name": "随机生成一个订单号", "desc": "使用随机数插件，随机生成一个订单号，存储至全局变量；", "type": "plugIn", "sleep": null, "params": {"type": "random", "params": {"length": 12, "get_field": "BILL_ID_START", "random_type": "STR"}}, "termination": false, "handlers": []}, {"id": 84, "number": 2, "name": "再随机生成一个订单号", "desc": "使用随机数插件，随机生成一个订单号，存储至全局变量；", "type": "plugIn", "sleep": null, "params": {"type": "random", "params": {"length": 12, "get_field": "BILL_ID_START_2", "random_type": "STR"}}, "termination": false, "handlers": []}, {"id": 85, "number": 3, "name": "获取订单asserts key", "desc": "访问asserts-key接口，并将key保留，用在之后的导入订单接口。", "type": "request", "sleep": null, "params": {"data": {}, "desc": "", "host": "https://ddapi.bigfintax.com", "name": "asserts-key接口", "path": "/assembleSignatureController/get/cqbh/O7XmUkNX", "method": "GET", "cookies": {}, "post_type": "", "response_type": "text"}, "termination": false, "handlers": [{"id": 769, "type": "extract", "params": {"path": "", "type": "text", "field": "ASSERT_KEY", "condition": []}}]}, {"id": 86, "number": 4, "name": "导入两条订单", "desc": "进行订单导入。", "type": "request", "sleep": 5, "params": {"data": {"Count": 2, "Content": [{"Buyer": "税控普票-差额征税-不含税-合并单据", "Items": [{"Num": "1", "Unit": "升", "Price": "1", "LineNo": "1", "FreeTax": "", "TaxFlag": "0", "TaxRate": "0.13", "Standard": "", "SumAmount": "1.00", "TaxAmount": "0.12", "DetailName": "劳务派遣服务费", "ParentCode": "3079900000000000000", "DiscountType": "0", "InvoiceAmount": "0.88", "DeductionAmount": "0.5", "VatSpecialManagement": ""}], "Payee": "王晗", "BillNo": "{{BILL_ID_START}}", "Drawer": "admin", "Seller": "500102201007206608", "BillDate": "20230216000000", "BillType": "1", "Reviewer": "范荣峥", "MachineNo": "", "StoreCode": "2021", "TaxAmount": "0.12", "TaxMethod": "2", "BuyerPhone": "010-88233550", "BuyerTaxNum": "123456787654111", "InvoiceType": "04", "SellerPhone": "027-65022526", "TotalAmount": "1.00", "BuyerAddress": "南京市雨花台区软件大道66号华通科技园406室", "RedAdviceNum": "", "SellerTaxNum": "500102201007206608", "BuyerBankName": "招商银行股份有限公司南京雨花支行", "InvoiceAmount": "0.88", "RedConfirmNum": "", "SellerAddress": "武汉市东西湖区新沟镇油纱路73号1栋", "SellerBankName": "中国光大银行武汉分行营业部", "SpecialInvoice": "", "BuyerBankAccount": "125914056010701", "SellerBankAccount": "38310188000444553"}, {"Buyer": "税控普票-差额征税-不含税-合并单据", "Items": [{"Num": "1", "Unit": "升", "Price": "1", "LineNo": "1", "FreeTax": "", "TaxFlag": "0", "TaxRate": "0.13", "Standard": "", "SumAmount": "1.00", "TaxAmount": "0.12", "DetailName": "劳务派遣服务费", "ParentCode": "3079900000000000000", "DiscountType": "0", "InvoiceAmount": "0.88", "DeductionAmount": "0.5", "VatSpecialManagement": ""}], "Payee": "王晗", "BillNo": "{{BILL_ID_START_2}}", "Drawer": "admin", "Seller": "500102201007206608", "BillDate": "20230216000000", "BillType": "1", "Reviewer": "范荣峥", "MachineNo": "", "StoreCode": "2021", "TaxAmount": "0.12", "TaxMethod": "2", "BuyerPhone": "010-88233550", "BuyerTaxNum": "123456787654111", "InvoiceType": "04", "SellerPhone": "027-65022526", "TotalAmount": "1.00", "BuyerAddress": "南京市雨花台区软件大道66号华通科技园406室", "RedAdviceNum": "", "SellerTaxNum": "500102201007206608", "BuyerBankName": "招商银行股份有限公司南京雨花支行", "InvoiceAmount": "0.88", "RedConfirmNum": "", "SellerAddress": "武汉市东西湖区新沟镇油纱路73号1栋", "SellerBankName": "中国光大银行武汉分行营业部", "SpecialInvoice": "", "BuyerBankAccount": "125914056010701", "SellerBankAccount": "38310188000444553"}], "RequestID": "3da5aff7c6914cf399923a72330af6191"}, "desc": "", "host": "https://d-k8s-xxp-ports-fp.bigfintax.com", "name": "导入接口", "path": "/inv-xx-ports/xxp/receiptDataIn?{{ASSERT_KEY}}", "method": "POST", "cookies": {}, "post_type": "json", "response_type": "json"}, "termination": false, "handlers": [{"id": 770, "type": "ext_asserts", "params": {"func": "==", "path": "Code", "type": "json", "condition": [], "value_right": "200"}}]}, {"id": 87, "number": 5, "name": "前台-账号登录", "desc": "使用登录插件，通过前台账号密码登录-并将test_cas_access_token，存储至全局变量；", "type": "plugIn", "sleep": null, "params": {"type": "login", "params": {"pass_word": "{{PWD_RECEPTION}}", "user_name": "{{USER_NAME_RECEPTION}}", "cookies_field": "COOKIES_RECEPTION"}}, "termination": false, "handlers": []}, {"id": 88, "number": 6, "name": "前台-尝试开启发票模板", "desc": "", "type": "request", "sleep": null, "params": {"data": {"id": "2204", "defaultFlag": 1}, "desc": "", "host": "{{TEST_HOST_OTHER}}", "name": "发票模板开关接口", "path": "/xxApi/api/v1/invoicingTemplate/optDefaultFlag", "method": "POST", "cookies": {"dev_cas_access_token": "{{COOKIES_RECEPTION}}", "test_cas_access_token": "{{COOKIES_RECEPTION}}"}, "headers": null, "post_type": "json", "response_type": "json"}, "termination": false, "handlers": []}, {"id": 89, "number": 7, "name": "前台-查询导入的订单数据，并提取billId", "desc": "", "type": "request", "sleep": null, "params": {"data": {"page": 1, "per_page": 10, "condition": "[{\"f\":\"billNo\",\"v\":\"{{BILL_ID_START}},{{BILL_ID_START_2}}\",\"op\":\"eq\",\"t\":\"s\"},{\"f\":\"createDateStart\",\"v\":\"\",\"op\":\"ge\",\"t\":\"s\"},{\"f\":\"createDateEnd\",\"v\":\"\",\"op\":\"le\",\"t\":\"s\"}]"}, "desc": "", "host": "{{TEST_HOST_OTHER}}", "name": "查询预制订单列表接口", "path": "/xxApi/api/v1/bill/queryBillInfoListNew", "method": "GET", "cookies": {"dev_cas_access_token": "{{COOKIES_RECEPTION}}", "test_cas_access_token": "{{COOKIES_RECEPTION}}"}, "headers": null, "post_type": "json", "response_type": "json"}, "termination": false, "handlers": [{"id": 771, "type": "extract", "params": {"path": "data.0.id", "type": "json", "field": "BILL_ID", "condition": []}}, {"id": 772, "type": "extract", "params": {"path": "data.1.id", "type": "json", "field": "BILL_ID_2", "condition": []}}]}, {"id": 90, "number": 8, "name": "前台-根据billId合并单据", "desc": "", "type": "request", "sleep": 5, "params": {"data": {"billIds": "{{BILL_ID}},{{BILL_ID_2}}"}, "desc": "", "host": "{{TEST_HOST_OTHER}}", "name": "查询预制订单列表接口", "path": "/xxApi/api/v1/bill/merge", "method": "POST", "cookies": {"dev_cas_access_token": "{{COOKIES_RECEPTION}}", "test_cas_access_token": "{{COOKIES_RECEPTION}}"}, "headers": null, "post_type": "form", "response_type": "json"}, "termination": false, "handlers": [{"id": 773, "type": "ext_asserts", "params": {"func": "==", "path": "code", "type": "json", "condition": [], "value_right": 200}}, {"id": 774, "type": "ext_asserts", "params": {"func": "==", "path": "result", "type": "json", "condition": [], "value_right": "success"}}]}, {"id": 91, "number": 9, "name": "前台-查询第一页数据，并获取合并单据的条目，提取billId", "desc": "", "type": "request", "sleep": null, "params": {"data": {"page": 1, "per_page": 10, "condition": "[{\"f\":\"createDateStart\",\"v\":\"\",\"op\":\"ge\",\"t\":\"s\"},{\"f\":\"createDateEnd\",\"v\":\"\",\"op\":\"le\",\"t\":\"s\"},{\"f\":\"billPageFlag\",\"v\":\"2\",\"op\":\"eq\",\"t\":\"i\"}]"}, "desc": "", "host": "{{TEST_HOST_OTHER}}", "name": "查询预制订单列表接口", "path": "/xxApi/api/v1/bill/queryBillInfoListNew", "method": "GET", "cookies": {"dev_cas_access_token": "{{COOKIES_RECEPTION}}", "test_cas_access_token": "{{COOKIES_RECEPTION}}"}, "headers": null, "post_type": "json", "response_type": "json"}, "termination": false, "handlers": [{"id": 775, "type": "extract", "params": {"path": "data.0.billNo", "type": "json", "field": "BILL_NO_MERGE", "condition": [{"originalBillNo": "{{BILL_ID_START}},{{BILL_ID_START_2}}"}], "iCondition": [{"originalBillNo": "{{BILL_ID_START_2}},{{BILL_ID_START}}"}]}}, {"id": 776, "type": "extract", "params": {"path": "data.1.id", "type": "json", "field": "BILL_NO_SYS_MERGE", "condition": [{"originalBillNo": "{{BILL_ID_START}},{{BILL_ID_START_2}}"}], "iCondition": [{"originalBillNo": "{{BILL_ID_START_2}},{{BILL_ID_START}}"}]}}, {"id": 777, "type": "asserts", "params": {"func": "!=", "value_left": "{{BILL_NO_SYS_MERGE}}", "value_right": null}}, {"id": 778, "type": "asserts", "params": {"func": "!=", "value_left": "{{BILL_NO_MERGE}}", "value_right": null}}]}, {"id": 92, "number": 10, "name": "前台-根据ID，确认合并订单", "desc": "", "type": "request", "sleep": null, "params": {"data": {"ids": ["{{BILL_NO_SYS_MERGE}}"]}, "desc": "", "host": "{{TEST_HOST_OTHER}}", "name": "合并订单确认接口", "path": "/xxApi/api/v1/bill/splitMerge/confirm", "method": "POST", "cookies": {"dev_cas_access_token": "{{COOKIES_RECEPTION}}", "test_cas_access_token": "{{COOKIES_RECEPTION}}"}, "headers": null, "post_type": "json", "response_type": "json"}, "termination": false, "handlers": [{"id": 779, "type": "ext_asserts", "params": {"func": "==", "path": "code", "type": "json", "condition": [], "value_right": 200}}, {"id": 780, "type": "ext_asserts", "params": {"func": "==", "path": "result", "type": "json", "condition": [], "value_right": "success"}}]}, {"id": 93, "number": 11, "name": "前台-根据ID，生成预置发票", "desc": "", "type": "request", "sleep": null, "params": {"data": [{"billId": "{{BILL_NO_SYS_MERGE}}"}], "desc": "", "host": "{{TEST_HOST_OTHER}}", "name": "生成预制发票接口", "path": "/xxApi/api/v1/bill/generateTemplateInvoice", "method": "POST", "cookies": {"dev_cas_access_token": "{{COOKIES_RECEPTION}}", "test_cas_access_token": "{{COOKIES_RECEPTION}}"}, "headers": null, "post_type": "json", "response_type": "json"}, "termination": false, "handlers": [{"id": 781, "type": "ext_asserts", "params": {"func": "==", "path": "code", "type": "json", "condition": [], "value_right": 200}}, {"id": 782, "type": "ext_asserts", "params": {"func": "==", "path": "result", "type": "json", "condition": [], "value_right": "success"}}]}, {"id": 94, "number": 12, "name": "前台-根据订单编号，查询待开发票管理页面；", "desc": "", "type": "request", "sleep": null, "params": {"data": {"page": 1, "pageFlag": 3, "per_page": 10, "condition": "[{\"f\":\"contraceNo\",\"v\":\"{{BILL_NO_MERGE}}\",\"op\":\"eq\",\"t\":\"s\"}]"}, "desc": "", "host": "{{TEST_HOST_OTHER}}", "name": "查询待开发票接口", "path": "/xxApi/api/v1/InvoicequeryPage", "method": "GET", "cookies": {"dev_cas_access_token": "{{COOKIES_RECEPTION}}", "test_cas_access_token": "{{COOKIES_RECEPTION}}"}, "headers": null, "post_type": "json", "response_type": "json"}, "termination": false, "handlers": [{"id": 783, "type": "ext_asserts", "params": {"func": "==", "path": "code", "type": "json", "condition": [], "value_right": 200}}, {"id": 784, "type": "ext_asserts", "params": {"func": "==", "path": "result", "type": "json", "condition": [], "value_right": "success"}}, {"id": 785, "type": "extract", "params": {"path": "data.0.strId", "type": "json", "field": "INVOICE_ID", "condition": []}}]}, {"id": 95, "number": 13, "name": "前台-查看待开发票明细；", "desc": "", "type": "request", "sleep": null, "params": {"data": {"invoiceId": "{{INVOICE_ID}}"}, "desc": "", "host": "{{TEST_HOST_OTHER}}", "name": "查询待开发票接口", "path": "/xxApi/api/v1/invoiceStay/queryInvoiceItem", "method": "GET", "cookies": {"dev_cas_access_token": "{{COOKIES_RECEPTION}}", "test_cas_access_token": "{{COOKIES_RECEPTION}}"}, "headers": null, "post_type": "json", "response_type": "json"}, "termination": false, "handlers": [{"id": 786, "type": "ext_asserts", "params": {"func": "==", "path": "result", "type": "json", "condition": [], "value_right": "success"}}, {"id": 787, "type": "ext_asserts", "params": {"func": "==", "path": "code", "type": "json", "condition": [], "value_right": 200}}, {"id": 788, "type": "ext_asserts", "params": {"func": "==", "path": "infos", "type": "json", "condition": [], "value_right": "成功"}}, {"id": 789, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.isRemoved", "type": "json", "condition": [], "value_right": "0"}}, {"id": 790, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.version", "type": "json", "condition": [], "value_right": 0}}, {"id": 791, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.orderNum", "type": "json", "condition": [], "value_right": 1}}, {"id": 792, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.detailName", "type": "json", "condition": [], "value_right": "*生活服务*劳务派遣服务费"}}, {"id": 793, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.standard", "type": "json", "condition": [], "value_right": ""}}, {"id": 794, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.price", "type": "json", "condition": [], "value_right": 0.94}}, {"id": 795, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.num", "type": "json", "condition": [], "value_right": 2}}, {"id": 796, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.unit", "type": "json", "condition": [], "value_right": "升"}}, {"id": 797, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.invoiceAmount", "type": "json", "condition": [], "value_right": 1.88}}, {"id": 798, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.taxAmount", "type": "json", "condition": [], "value_right": 0.12}}, {"id": 799, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.sumAmount", "type": "json", "condition": [], "value_right": 2}}, {"id": 800, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.taxRate", "type": "json", "condition": [], "value_right": "0.13"}}, {"id": 801, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.parentCode", "type": "json", "condition": [], "value_right": "3079900000000000000"}}, {"id": 802, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.isVoided", "type": "json", "condition": [], "value_right": "0"}}, {"id": 803, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.ldate", "type": "json", "condition": [], "value_right": 202307}}, {"id": 804, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.discountType", "type": "json", "condition": [], "value_right": "0"}}, {"id": 805, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.preferentialFlag", "type": "json", "condition": [], "value_right": "0"}}, {"id": 806, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.freeTax", "type": "json", "condition": [], "value_right": ""}}, {"id": 807, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.vatSpecialManagement", "type": "json", "condition": [], "value_right": ""}}, {"id": 808, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.taxFlag", "type": "json", "condition": [], "value_right": "0"}}, {"id": 809, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.deductionAmount", "type": "json", "condition": [], "value_right": 1}}, {"id": 810, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.splitItem", "type": "json", "condition": [], "value_right": false}}, {"id": 811, "type": "ext_asserts", "params": {"func": "==", "path": "data.0.priceExcludeTax", "type": "json", "condition": [], "value_right": 0.94}}]}, {"id": 96, "number": 14, "name": "前台-根据查询的STR_ID，进行发票开具接口；", "desc": "", "type": "request", "sleep": null, "params": {"data": {"ids": "{{INVOICE_ID}}"}, "desc": "", "host": "{{TEST_HOST_OTHER}}", "name": "前台-开具发票接口", "path": "/xxApi/api/v1/invoiceStay/stayInvoicePro", "method": "GET", "cookies": {"dev_cas_access_token": "{{COOKIES_RECEPTION}}", "test_cas_access_token": "{{COOKIES_RECEPTION}}"}, "headers": null, "post_type": "json", "response_type": "json"}, "termination": false, "handlers": [{"id": 812, "type": "ext_asserts", "params": {"func": "==", "path": "code", "type": "json", "condition": [], "value_right": 200}}, {"id": 813, "type": "ext_asserts", "params": {"func": "==", "path": "result", "type": "json", "condition": [], "value_right": "success"}}]}, {"id": 97, "number": 15, "name": "数据库查询开具发票接口，确定字段信息，并验证有效字段；", "desc": "", "type": "plugIn", "sleep": null, "params": {"type": "pg_db", "params": {"SQL": "select * from xx_invoice_json_log where invoice_id = '{{INVOICE_ID}}'", "host": "192.168.2.65", "port": 5432, "user": "user1", "db_name": "inv_xx", "password": "123456", "field_list": [{"col": 4, "row": 0, "field": "response"}]}}, "termination": false, "handlers": [{"id": 814, "type": "ext_asserts", "params": {"func": "==", "path": "casherName", "type": "json", "condition": [], "value_right": "王晗"}}, {"id": 815, "type": "ext_asserts", "params": {"func": "==", "path": "machineCode", "type": "json", "condition": [], "value_right": ""}}, {"id": 816, "type": "ext_asserts", "params": {"func": "==", "path": "tradeNo", "type": "json", "condition": [], "value_right": "{{BILL_NO_MERGE}}"}}, {"id": 817, "type": "ext_asserts", "params": {"func": "==", "path": "buyerBankAccount", "type": "json", "condition": [], "value_right": "125914056010701"}}, {"id": 818, "type": "ext_asserts", "params": {"func": "==", "path": "sellerAddress", "type": "json", "condition": [], "value_right": "武汉市东西湖区新沟镇油纱路73号1栋"}}, {"id": 819, "type": "ext_asserts", "params": {"func": "==", "path": "remark", "type": "json", "condition": [], "value_right": "*生活服务*劳务派遣服务费:2.00"}}, {"id": 820, "type": "ext_asserts", "params": {"func": "==", "path": "buyerName", "type": "json", "condition": [], "value_right": "税控普票-差额征税-不含税-合并单据"}}, {"id": 821, "type": "ext_asserts", "params": {"func": "==", "path": "buyerAddress", "type": "json", "condition": [], "value_right": "南京市雨花台区软件大道66号华通科技园406室010-88233550"}}, {"id": 822, "type": "ext_asserts", "params": {"func": "==", "path": "reviewerName", "type": "json", "condition": [], "value_right": "范荣峥"}}, {"id": 823, "type": "ext_asserts", "params": {"func": "==", "path": "buyerBankName", "type": "json", "condition": [], "value_right": "招商银行股份有限公司南京雨花支行"}}, {"id": 824, "type": "ext_asserts", "params": {"func": "==", "path": "sellerBankAccount", "type": "json", "condition": [], "value_right": "38310188000444553"}}, {"id": 825, "type": "ext_asserts", "params": {"func": "==", "path": "buyerTaxpayerNum", "type": "json", "condition": [], "value_right": "123456787654111"}}, {"id": 826, "type": "ext_asserts", "params": {"func": "==", "path": "sellerTel", "type": "json", "condition": [], "value_right": "027-65022526"}}, {"id": 827, "type": "ext_asserts", "params": {"func": "==", "path": "drawerName", "type": "json", "condition": [], "value_right": "admin"}}, {"id": 828, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.0.unitPrice", "type": "json", "condition": [], "value_right": "0.94000000"}}, {"id": 829, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.0.taxRateAmount", "type": "json", "condition": [], "value_right": "0.12"}}, {"id": 830, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.0.taxRateValue", "type": "json", "condition": [], "value_right": "0.13"}}, {"id": 831, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.0.specificationModel", "type": "json", "condition": [], "value_right": ""}}, {"id": 832, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.0.quantity", "type": "json", "condition": [], "value_right": "2.00000000"}}, {"id": 833, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.0.deductionAmount", "type": "json", "condition": [], "value_right": "1.00"}}, {"id": 834, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.0.taxClassificationCode", "type": "json", "condition": [], "value_right": "3079900000000000000"}}, {"id": 835, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.0.invoiceAmount", "type": "json", "condition": [], "value_right": "1.88"}}, {"id": 836, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.0.includeTaxFlag", "type": "json", "condition": [], "value_right": "0"}}, {"id": 837, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.0.goodsName", "type": "json", "condition": [], "value_right": "*生活服务*劳务派遣服务费"}}, {"id": 838, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.0.meteringUnit", "type": "json", "condition": [], "value_right": "升"}}, {"id": 839, "type": "ext_asserts", "params": {"func": "==", "path": "itemList.0.zeroTaxFlag", "type": "json", "condition": [], "value_right": ""}}, {"id": 840, "type": "ext_asserts", "params": {"func": "==", "path": "taxpayerNum", "type": "json", "condition": [], "value_right": "500102201007206608"}}, {"id": 841, "type": "ext_asserts", "params": {"func": "==", "path": "extensionNum", "type": "json", "condition": [], "value_right": "0"}}, {"id": 842, "type": "ext_asserts", "params": {"func": "==", "path": "sellerBankName", "type": "json", "condition": [], "value_right": "中国光大银行武汉分行营业部"}}]}]}]}}